{"version":3,"sources":["webpack:///webpack/bootstrap 457da5dde3c94cf6b2ef","webpack:///./src/pollBuilder.js","webpack:///./src/EventDispatcher.js","webpack:///./src/utils.js","webpack:///./src/Platform.js","webpack:///./src/UtilsClass.js","webpack:///./src/Builder.js","webpack:///./src/request.js","webpack:///./src/StickyBuilder.js","webpack:///./src/SVGButton.js","webpack:///./src/Promise.js","webpack:///./~/timers-browserify/main.js","webpack:///./~/setimmediate/setImmediate.js","webpack:///./~/process/browser.js"],"names":["PollBuilder","version","isSupported","dragAndDropSupported","_apiURL","_pollBuilderURL","_targetOrigin","utils","instances","ind","setLoaded","index","iframe","contentWindow","postMessage","event","pollBuilder","cont","token","opts","inst","promise","init","minimize","maximize","toggle","list","document","querySelectorAll","Array","isArray","i","ii","length","btn","addButtons","indexOf","push","addEventListener","buttonAdd","buttons","body","contains","removeEventListener","splice","window","dragStart","dragEnd","obj","validOrigin","origin","wildTarget","dataIsObj","data","fromPollFlag","fromPoll","isEvent","dispatchEvent","EventDispatcher","callbacks","type","callback","arr","call","def","shouldEmbedMobile","cssUnit","val","dflt","ie","getIEVersion","hasDraggable","createElement","isKnownMobile","test","navigator","userAgent","hasEvents","isEventSupported","mobile","match","parseInt","undefined","eventName","element","TAGNAMES","setAttribute","removeAttribute","Platform","desktop","phone","tablet","android","ios","blackberry","winmobile","os","platform","toLowerCase","ua","easyregex","osregex","isIE","Utils","img","style","width","Builder","evt","map","_dragstart","_dragend","currentTarget","getAttribute","_buttonadd","loaded","id","metadata","layover","_firstSize","_height","_hypeDragData","_onResize","newHeight","height","transition","maxxed","target","hasAttribute","dataTransfer","setData","pointerEvents","display","_dragover","querySelector","preventDefault","_dragleave","_drop","JSON","parse","e","stopPropagation","button","maximizeSticky","console","warn","Promise","resolve","reject","getComputedStyle","getPropertyValue","position","then","useMobile","urlWVars","addHTML","cssToAdd","innerHTML","className","builder","catch","err","cssAdded","request","verb","url","headers","stringify","req","XMLHttpRequest","open","setRequestHeader","key","onerror","Error","onload","response","responseText","status","send","StickyBuilder","isEmpty","handleDefaults","sticky","cssText","mobileBuilderStyles","builderStyles","setTimeout","appendChild","_onResize2","_onFirstResize","minimizeSticky","float","side","maxW","maxH","mobileButtonStyles","buttonStyles","toggleSticky","bind","buttonDelay","buttonMarkup","buttonImage","attr2xMain","buttonImages2x","attr2x","buttonImageHover","buttonImageActive","backgroundColor","zIndex","buttonOffsetX","fromTop","buttonOffsetY","builderOffsetX","builderOffsetY","insertBefore","buttonColor","theme","highlight","invertButton","SVGButton","circleBackground","washPercent","blackText","fadeBackground","log","imgLoadCode","root","setTimeoutFunc","noop","fn","thisArg","apply","arguments","TypeError","_state","_handled","_value","_deferreds","doResolve","handle","self","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","newValue","finale","_unhandledRejectionFn","len","Handler","done","value","reason","ex","prototype","prom","constructor","all","args","slice","remaining","res","race","values","setImmediate","_setImmediateFn","_setUnhandledRejectionFn","Function","exports","Timeout","clearTimeout","setInterval","clearInterval","timeout","close","clearFn","_id","_clearFn","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","onTimeout","_onTimeout","require","clearImmediate","global","nextHandle","tasksByHandle","currentlyRunningATask","doc","registerImmediate","task","run","runIfPresent","installNextTickImplementation","process","nextTick","canUsePostMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","installPostMessageImplementation","messagePrefix","Math","random","onGlobalMessage","source","attachEvent","installMessageChannelImplementation","channel","MessageChannel","port1","port2","installReadyStateChangeImplementation","html","documentElement","script","onreadystatechange","removeChild","installSetTimeoutImplementation","attachTo","Object","getPrototypeOf","toString","module","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","concat","drainQueue","Item","array","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","cwd","chdir","dir","umask"],"mappings":"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","file":"hyperr.pollbuilder.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 457da5dde3c94cf6b2ef","\r\n\r\n/*******************************************************\r\n * Copyright (C) 2016 PTP APP LLC - All Rights Reserved\r\n * Unauthorized copying of this file, in whole or in part, via any medium is strictly prohibited.\r\n * Proprietary and Confidential\r\n *******************************************************/\r\n\r\nimport EventDispatcher from './EventDispatcher';\r\nimport {isSupported, dragAndDropSupported} from './utils';\r\nimport Utils from './UtilsClass';\r\nimport Builder from './Builder';\r\nimport StickyBuilder from './StickyBuilder';\r\nimport './Promise';\r\n\r\nclass PollBuilder extends EventDispatcher\r\n{\r\n\t// version is important so that pollbuilder served from hyperr knows what script is in use\r\n\tversion = '2.2.0'\r\n\t\r\n\t// whether or not this component is supported\r\n\tisSupported = isSupported\r\n\t\r\n\t// whether or not the drag and drop usage is supported\r\n\tdragAndDropSupported = dragAndDropSupported\r\n\t\r\n\t// private API, for setting the API and poll builder urls and other stuff\r\n\t_apiURL = 'https://api.gethyperr.com' // prefix domain for the API\r\n\t_pollBuilderURL = 'https://pollbuilder.gethyperr.com' // prefix domain for the iframe\r\n\t_targetOrigin = 'https://pollbuilder.gethyperr.com' // target domain you want to allow communication from\r\n\t_iframeLoaded(ind) { Builder.setLoaded(ind); }\r\n\t\r\n\t// utility functions that the pollBuilder needs or provides\r\n\tutils = Utils\r\n\t\r\n\t// requests for the poll builder to send a pb:data event with the raw state data, can use index to choose iframe, otherwise uses 0\r\n\trequestData(index = 0)\r\n\t{\r\n\t\tvar iframe = this.instances[index].iframe;\r\n\t\tiframe.contentWindow.postMessage({event:'requestdata'}, pollBuilder._targetOrigin)\r\n\t}\r\n\t\r\n\t// Array of instances for the poll builder, automatically kept up by the Builder class\r\n\tinstances = Builder.instances\r\n\t\r\n\t// used to actually embed a poll builder in an element when manually used (i.e. no sticky)\r\n\tembed(cont, token, opts)\r\n\t{\r\n\t\tvar inst = new Builder(cont, token, opts);\r\n\t\treturn inst.promise;\r\n\t}\r\n\t\r\n\t// an easier way to use, creates a sticky version with certain data\r\n\tembedSticky(token, init)\r\n\t{\r\n\t\tvar inst = new StickyBuilder(token, init);\r\n\t\treturn inst.promise;\r\n\t}\r\n\r\n\tminimizeSticky(index = 0)\r\n\t{\r\n\t\tvar inst = Builder.instances[index];\r\n\t\tinst.minimize();\r\n\t}\r\n\r\n\tmaximizeSticky(index = 0)\r\n\t{\r\n\t\tvar inst = Builder.instances[index];\r\n\t\tinst.maximize();\r\n\t}\r\n\r\n\ttoggleSticky(index = 0)\r\n\t{\r\n\t\tvar inst = Builder.instances[index];\r\n\t\tinst.toggle();\r\n\t}\r\n\t\r\n\taddButtons(list)\r\n\t{\r\n\t\tif (typeof list === 'string') {\r\n\t\t\tlist = document.querySelectorAll(list); // assume is query selector string\r\n\t\t} else if (Array.isArray(list)) {\r\n\t\t\t// is Array, do nothing\r\n\t\t} else {\r\n\t\t\tlist = [list];// assume is the element itself, make into 1 item array\r\n\t\t}\r\n\t\t\r\n\t\tfor (var i=0,ii=list.length; i<ii; i++)\r\n\t\t{\r\n\t\t\tvar btn = list[i];\r\n\t\t\t\r\n\t\t\t// if already in there don't do it again\r\n\t\t\tif (Builder.addButtons.indexOf(btn) > -1)\r\n\t\t\t\tcontinue;\r\n\t\t\t\r\n\t\t\tBuilder.addButtons.push(list[i]); // track it\r\n\t\t\tlist[i].addEventListener('click', Builder.buttonAdd); // add listener to it\r\n\t\t}\r\n\t}\r\n\t\r\n\tcleanButtons()\r\n\t{\r\n\t\tvar buttons = Builder.addButtons;\r\n\t\t\r\n\t\tvar i = buttons.length;\r\n\t\twhile (i--)\r\n\t\t{\r\n\t\t\tif (!document.body.contains(buttons[i]))\r\n\t\t\t{\r\n\t\t\t\tbuttons[i].removeEventListener('click', Builder.buttonAdd); // clean up listener\r\n\t\t\t\tbuttons.splice(i, 1); // un-track\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// create/export for usage\r\nvar pollBuilder = new PollBuilder();\r\nexport default pollBuilder;\r\nwindow.pollBuilder = pollBuilder;\r\n\r\n// ------------------- need to listen to all dragging events to pass them to builders ----------------------\r\n\r\nwindow.document.addEventListener('dragstart', Builder.dragStart, false);\r\nwindow.document.addEventListener('dragend', Builder.dragEnd, false);\r\n\r\n// ------------- deal with events from poll builder ------------\r\n\r\nwindow.addEventListener(\"message\", function(obj)\r\n{\r\n\tvar validOrigin = obj.origin === pollBuilder._targetOrigin;\r\n\tvar wildTarget = pollBuilder._targetOrigin === '*';\r\n\tvar dataIsObj = typeof obj.data === 'object';\r\n\tvar fromPollFlag = !!obj.data.fromPoll;\r\n\t\r\n\t// weed out messages not from poll builders\r\n\tif (!dataIsObj || !fromPollFlag || (!validOrigin && !wildTarget))\r\n\t\treturn;\r\n\t\r\n\t// if is flagged as an event, then dispatch it\r\n\tif (obj.data.isEvent)\r\n\t{\r\n\t\tvar event = obj.data.event;\r\n\t\tvar index = event.index;\r\n\t\tdelete event.index; // user doesn't need this, will only be possibly confused\r\n\t\tpollBuilder.instances[index].dispatchEvent(event);\r\n\t\tpollBuilder.dispatchEvent(event);\r\n\t}\r\n})\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pollBuilder.js","\r\nexport default class EventDispatcher\r\n{\r\n\tcallbacks = {};\r\n\t\r\n\taddEventListener(type, callback)\r\n\t{\t\r\n\t\tif (!this.callbacks[type])\r\n\t\t\tthis.callbacks[type] = [];\r\n\t\t\r\n\t\tif (this.callbacks[type].indexOf(callback) === -1)\r\n\t\t\tthis.callbacks[type].push(callback);\r\n\t}\r\n\t\r\n\thasEventListener(type, callback)\r\n\t{\r\n\t\treturn this.callbacks[type] && this.callbacks[type].indexOf(callback) > -1;\r\n\t}\r\n\t\r\n\tremoveEventListener(type, callback)\r\n\t{\r\n\t\tvar arr = this.callbacks[type];\r\n\t\t\r\n\t\tif (arr)\r\n\t\t{\r\n\t\t\tvar i = arr.indexOf(callback);\r\n\t\t\t\r\n\t\t\tif (i > -1)\r\n\t\t\t\tarr.splice(i, 1);\r\n\t\t}\r\n\t}\r\n\t\r\n\tdispatchEvent(event)\r\n\t{\r\n\t\tvar arr = this.callbacks[event.type];\r\n\t\t\r\n\t\tif (arr)\r\n\t\t\tfor (var i=0, ii=arr.length; i < ii; i++)\r\n\t\t\t\tarr[i].call(this, event);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/EventDispatcher.js","\r\nimport Platform from './Platform';\r\n\r\nexport function def(val, dflt) {\r\n\treturn typeof val === 'undefined' ? dflt : val;\r\n}\r\n\r\n\r\nexport function isSupported()\r\n{\r\n\tvar ie = getIEVersion();\r\n\t\r\n\tif (ie && ie < 10)\r\n\t\treturn false;\r\n\t\r\n\treturn true;\r\n}\r\n\r\nexport function dragAndDropSupported()\r\n{\r\n\tvar hasDraggable  = \"draggable\" in document.createElement(\"div\");\r\n\tvar isKnownMobile = /Mobile|Android|Slick\\/|Kindle|BlackBerry|Opera Mini|Opera Mobi/i.test(navigator.userAgent);\r\n\tvar hasEvents     = isEventSupported('dragstart') && isEventSupported('drop');\r\n\t\r\n\treturn hasDraggable && hasEvents && !isKnownMobile;\r\n}\r\n\r\nexport function shouldEmbedMobile()\r\n{\r\n\treturn Platform.mobile;\r\n}\r\n\r\nfunction getIEVersion() // Note: undefined for IE Edge\r\n{\r\n    var match = navigator.userAgent.match(/(?:MSIE |Trident\\/.*; rv:)(\\d+)/);\r\n    return match ? parseInt(match[1]) : undefined;\r\n}\r\n\r\n// isEventSupported code derived from https://github.com/kangax/iseventsupported\r\n// Copyright (c) 2009 Juriy Zaytsev, released open source under license: https://github.com/kangax/iseventsupported/blob/gh-pages/LICENSE\r\nfunction isEventSupported(eventName, element)\r\n{\r\n\tvar TAGNAMES = {\r\n\t\t'select': 'input', 'change': 'input',\r\n\t\t'submit': 'form', 'reset': 'form',\r\n\t\t'error': 'img', 'load': 'img', 'abort': 'img'\r\n\t};\r\n\t\r\n\telement = element || document.createElement(TAGNAMES[element] || 'div');\r\n\teventName = 'on' + eventName;\r\n\t\r\n\t// When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and \"resize\", whereas `in` \"catches\" those\r\n\tvar isSupported = eventName in element;\r\n\r\n\tif ( !isSupported ) {\r\n\t\t// If it has no `setAttribute` (i.e. doesn't implement Node interface), try generic element\r\n\t\tif ( !element.setAttribute ) {\r\n\t\t\telement = document.createElement('div');\r\n\t\t}\r\n\t\tif ( element.setAttribute && element.removeAttribute ) {\r\n\t\t\telement.setAttribute(eventName, '');\r\n\t\t\tisSupported = typeof element[eventName] == 'function';\r\n\r\n\t\t\t// If property was created, \"remove it\" (by setting value to `undefined`)\r\n\t\t\tif ( typeof element[eventName] != 'undefined' ) {\r\n\t\t\t\telement[eventName] = undefined;\r\n\t\t\t}\r\n\t\t\telement.removeAttribute(eventName);\r\n\t\t}\r\n\t}\r\n\t\r\n\telement = null;\r\n\treturn isSupported;\r\n}\r\n\r\nexport function cssUnit(val)\r\n{\r\n\tif (typeof val === 'number')\r\n\t\treturn val + 'px';\r\n\telse\r\n\t\treturn val;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","/*\r\n\tThis script is not open source. It is a proprietary script not to be reused or redistributed.\r\n*/\r\n\r\nexport default class Platform\r\n{\r\n\tdesktop = false;\r\n\tmobile = false; // true if phone OR tablet\r\n\tphone = false;\r\n\ttablet = false;\r\n\t\r\n\tandroid = false;\r\n\tios = false;\r\n\tblackberry = false;\r\n\twinmobile = false;\r\n}\r\n\r\n\r\n// ----------- setup ------------\r\n\r\nvar os = navigator.platform.toLowerCase(), ua = navigator.userAgent.toLowerCase();\r\nvar easyregex = /mobi(le)?|tablet|phone|palm|pocket|handheld|e?book|reader|ip(ad|od|hone)|android|blackberry|playbook|webos|windows ce/;\r\nvar osregex = /linux|unix|^win|^mac/;\r\nvar isIE = !!navigator.userAgent.match(/(?:MSIE |Trident\\/.*; rv:)(\\d+)/);\r\n\r\n// figure out mobile vs desktop\r\nif (!isIE && (easyregex.test(os) || easyregex.test(ua))) {\r\n\tPlatform.mobile = true;\r\n} else if (osregex.test(os)) {\r\n\tPlatform.desktop = true;\r\n} else {\r\n\tPlatform.mobile = true; // assume mobile if unknown\r\n}\r\n\r\n// if mobile, try to determine type\r\nif (Platform.mobile)\r\n{\r\n\t// figure out OS if we can\r\n\tif ((/android/).test(ua))\r\n\t\tPlatform.android = true;\r\n\telse if ((/ip(ad|od|hone)/).test(ua))\r\n\t\tPlatform.ios = true;\r\n\telse if ((/blackberry|playbook/).test(ua))\r\n\t\tPlatform.blackberry = true;\r\n\telse if ((/windows/).test(ua))\r\n\t\tPlatform.winmobile = true;\r\n\t\r\n\t// determine tablet vs phone\r\n\tif ((/tablet|ipad|playbook/).test(ua))\r\n\t\tPlatform.tablet = true;\r\n\telse if ((/phone/).test(ua))\r\n\t\tPlatform.phone = true;\r\n\telse\r\n\t\tPlatform.phone = true; // default to phone if unknown\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Platform.js","\r\nexport default class Utils\r\n{\r\n\t// used onload to halfen images that are double size for retina\r\n\tstatic halfenImage(img) {\r\n\t\timg.style.width = img.width/2 + \"px\";\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/UtilsClass.js","\r\nimport EventDispatcher from './EventDispatcher';\r\nimport request from './request';\r\n\r\nexport default class Builder extends EventDispatcher\r\n{\r\n\t// STATIC PUBLIC -----------------------------------------------------------\r\n\t\r\n\tstatic instances = [];\r\n\t\r\n\tstatic dragStart(evt)\r\n\t{\r\n\t\tBuilder.instances.map(inst => inst._dragstart(evt));\r\n\t\tpollBuilder.dispatchEvent({type:'pb:begindrag'});\r\n\t}\r\n\t\r\n\tstatic dragEnd(evt)\r\n\t{\r\n\t\tBuilder.instances.map(inst => inst._dragend(evt));\r\n\t\tpollBuilder.dispatchEvent({type:'pb:enddrag'});\r\n\t}\r\n\t\r\n\tstatic addButtons = []; // list of registered buttons\r\n\tstatic buttonAdd(evt)\r\n\t{\r\n\t\tvar btn = evt.currentTarget;\r\n\t\tvar index = parseInt(btn.getAttribute('data-poll-builder-index')) || 0;\r\n\t\tBuilder.instances[index]._buttonadd(btn);\r\n\t}\r\n\t\r\n\tstatic setLoaded(index)\r\n\t{\r\n\t\tBuilder.instances[index].loaded = true;\r\n\t}\r\n\t\r\n\t\r\n\t// PUBLIC -----------------------------------------------------------\r\n\t\r\n\tindex      = null;\r\n\tid         = null;\r\n\tmobile     = null;\r\n\ttoken      = null;\r\n\tpromise    = null;\r\n\tmetadata   = null;\r\n\tcont       = null; // containing element it's being embedded in\r\n\tiframe     = null; // the iframe element itself\r\n\tlayover    = null; // layover element that goes over the iframe\r\n\tloaded     = false;\r\n\t\r\n\tconstructor(cont, token, opts)\r\n\t{\r\n\t\tsuper();\r\n\t\t\r\n\t\tvar index = this.index = Builder.instances.length;\r\n\t\tBuilder.instances[index] = this;\r\n\t\t\r\n\t\tif (!pollBuilder.isSupported()) {\r\n\t\t\tconsole.warn(\"This browser/device is not capable of using hyperr poll builder and will not embed. You can use `pollBuilder.isSupported()` to determine this at runtime.\");\r\n\t\t\treturn {promise:Promise.resolve(null)};\r\n\t\t}\r\n\t\t\r\n\t\tthis.promise = new Promise((resolve, reject)=>\r\n\t\t{\t\r\n\t\t\tvar style = window.getComputedStyle(cont);\r\n\t\t\tif (style.getPropertyValue('position') === 'static') {\r\n\t\t\t\tconsole.warn('Embed container must not be set to the CSS `position:static;`. It will be changed to relative.');\r\n\t\t\t\tcont.style.position = 'relative';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\trequest('GET', `${pollBuilder._apiURL}/builders/${token}`).then((metadata)=>\r\n\t\t\t{\r\n\t\t\t\tthis.metadata = metadata;\r\n\t\t\t\tthis.index = index;\r\n\t\t\t\tthis.cont = typeof cont==='string' ? window.document.querySelector(cont) : cont;\r\n\t\t\t\tthis.id = `pollbuilder-iframe-${this.index}`;\r\n\t\t\t\tthis.mobile = opts && opts.useMobile;\r\n\t\t\t\t\r\n\t\t\t\tvar urlWVars = `${pollBuilder._pollBuilderURL}/${token}?pollBuilderID=${this.id}&pollBuilderIndex=${index}&scriptVersion=${pollBuilder.version}${this.mobile?'&mobile=1':''}${pollBuilder.dragAndDropSupported()?'&dnd=1':''}`;\r\n\t\t\t\tvar addHTML = `<iframe id=\"${this.id}\" class=\"pollbuilder-iframe\" onload=\"pollBuilder._iframeLoaded(${index});\" src=\"${urlWVars}\"></iframe><div class=\"pollbuilder-iframe-layover\"></div>`;\r\n\t\t\t\taddHTML += cssToAdd(); // adds static CSS needed if not already added\r\n\t\t\t\t\r\n\t\t\t\tcont.innerHTML = addHTML;\r\n\t\t\t\tcont.addEventListener('drop', this._drop, false);\r\n\t\t\t\tcont.addEventListener('dragover', this._dragover, false);\r\n\t\t\t\tcont.addEventListener('dragleave', this._dragleave, false);\r\n\t\t\t\tcont.className += ' pollbuilder-cont';\r\n\t\t\t\t\r\n\t\t\t\tvar iframe = this.iframe = cont.querySelector('iframe');\r\n\t\t\t\tiframe.builder = this;\r\n\t\t\t\tiframe.style.width = '0px';\r\n\t\t\t\tiframe.style.height = '0px';\r\n\t\t\t\t\r\n\t\t\t\tthis.layover = cont.querySelector('.pollbuilder-iframe-layover');\r\n\t\t\t\t\r\n\t\t\t\tthis.addEventListener('pb:sizechange', this._onResize);\r\n\t\t\t\t\r\n\t\t\t\tresolve(iframe);\r\n\t\t\t})\r\n\t\t\t.catch((err)=>\r\n\t\t\t{\r\n\t\t\t\treject(err);\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\t\r\n\t\r\n\t// INTERNAL -----------------------------------------------------------\r\n\t\r\n\t_firstSize = true;\r\n\t_height = 0;\r\n\t_hypeDragData = false;\r\n\t\r\n\t_onResize = (evt) =>\r\n\t{\r\n\t\tvar newHeight = evt.data.height;\r\n\t\t\r\n\t\tif (this._firstSize)\r\n\t\t\tthis.iframe.style.width = this.mobile ? '100%' : evt.data.width+'px';\r\n\t\t\r\n\t\tif (!this._firstSize)\r\n\t\t\tthis.iframe.style.transition = 'height '+(newHeight<this._height?400:200)+'ms';\r\n\t\t\r\n\t\tif (!this._firstSize && this.maxxed)\r\n\t\t\tthis.cont.style.height = newHeight+'px';\r\n\t\t\r\n\t\tthis.iframe.style.height = newHeight+'px';\r\n\t\t\r\n\t\tthis._height = newHeight;\r\n\t\tthis._firstSize = false;\r\n\t}\t\t\r\n\t\r\n\t_dragstart = (evt) =>\r\n\t{\r\n\t\t// if not a poll builder intended item, ignore\r\n\t\tif (!evt || !evt.target || !evt.target.hasAttribute || !evt.target.hasAttribute('data-poll-builder'))\r\n\t\t\treturn;\r\n\t\t\r\n\t\tvar data = evt.target.getAttribute('data-poll-builder');\r\n\t\t\r\n\t\tif (data)\r\n\t\t{\r\n\t\t\tthis._hypeDragData = data;\r\n\t\t\t\r\n\t\t\tif (evt.dataTransfer && evt.dataTransfer.setData)\r\n\t\t\t\tevt.dataTransfer.setData('text', data); // firefox needs dataTransfer data to work, but we don't actually use it\r\n\t\t\t\r\n\t\t\tthis.iframe.style.pointerEvents = 'none';\r\n\t\t\tthis.layover.style.display = 'block';\r\n\t\t\tthis.iframe.contentWindow.postMessage({event:'dragstart'}, pollBuilder._targetOrigin);\r\n\t\t\tthis.dispatchEvent({type:'pb:begindrag'});\r\n\t\t}\r\n\t}\r\n\t\r\n\t_dragend = (evt) =>\r\n\t{\r\n\t\tif (this._hypeDragData)\r\n\t\t{\r\n\t\t\tthis._hypeDragData = false;\r\n\t\t\t\r\n\t\t\tthis.iframe.style.pointerEvents = 'auto';\r\n\t\t\tthis.layover.style.display = 'none';\r\n\t\t\tthis.iframe.contentWindow.postMessage({event:'dragend'}, pollBuilder._targetOrigin)\r\n\t\t}\r\n\t}\r\n\r\n\t_dragover = (evt) =>\r\n\t{\r\n\t\tif (!this._hypeDragData)\r\n\t\t\treturn;\r\n\t\t\r\n\t\tvar target = evt.currentTarget.querySelector('iframe')\r\n\t\ttarget.contentWindow.postMessage({event:'dragover'}, pollBuilder._targetOrigin)\r\n\t\t\r\n\t\tevt.preventDefault();\r\n\t\treturn false;\r\n\t}\r\n\r\n\t_dragleave = (evt) =>\r\n\t{\r\n\t\tif (!this._hypeDragData)\r\n\t\t\treturn;\r\n\t\t\r\n\t\tvar target = evt.currentTarget.querySelector('iframe')\r\n\t\ttarget.contentWindow.postMessage({event:'dragleave'}, pollBuilder._targetOrigin)\r\n\t\t\r\n\t\tevt.preventDefault();\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t_drop = (evt) =>\r\n\t{\r\n\t\tif (!this._hypeDragData)\r\n\t\t\treturn;\r\n\t\t\r\n\t\ttry { this._hypeDragData = JSON.parse(this._hypeDragData); }\r\n\t\tcatch(e){}\r\n\t\t\r\n\t\tvar target = evt.currentTarget.querySelector('iframe')\r\n\t\ttarget.contentWindow.postMessage({event:'drop', data:this._hypeDragData}, pollBuilder._targetOrigin)\r\n\t\t\r\n\t\tevt.stopPropagation();\r\n\t\tevt.preventDefault();\r\n\t}\r\n\t\r\n\t_buttonadd = (btn) =>\r\n\t{\r\n\t\ttry {\r\n\t\t\r\n\t\t\tvar data = btn.getAttribute('data-poll-builder');\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t\t\r\n\t\t\tif (this.iframe) {\r\n\t\t\t\tthis.iframe.contentWindow.postMessage({event:'add', data:data}, pollBuilder._targetOrigin);\r\n\t\t\t\tthis.dispatchEvent({type:'pb:buttonadd', button:btn});\r\n\t\t\t\tpollBuilder.dispatchEvent({type:'pb:buttonadd', button:btn});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tpollBuilder.maximizeSticky(this.index);\r\n\t\t\r\n\t\t} catch (e) {}\r\n\t}\r\n}\r\n\r\n\r\n// STATIC PRIVATE  -----------------------------------------------------------\r\n\r\nvar cssAdded = false;\r\nfunction cssToAdd()\r\n{\r\n\tif (!cssAdded)\r\n\t{\r\n\t\tcssAdded = true;\r\n\t\treturn `\r\n\t\t\t<style>\r\n\t\t\t\t.pollbuilder-cont {\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t.pollbuilder-iframe-layover {\r\n\t\t\t\t\tdisplay: none;\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tleft: 0;\r\n\t\t\t\t\ttop: 0;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t.pollbuilder-iframe {\r\n\t\t\t\t\tborder: none;\r\n\t\t\t\t\toutline: none;\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t}\r\n\t\t\t</style>`\r\n\t} else {\r\n\t\treturn '';\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Builder.js","\r\n// assumes a JSON return value\r\nexport default function request(verb, url, body, headers)\r\n{\r\n\treturn new Promise((resolve, reject)=>\r\n\t{\r\n\t\tif (!body)\r\n\t\t\tbody = '';\r\n\t\tif (typeof body === 'object')\r\n\t\t\tbody = JSON.stringify(body);\r\n\t\t\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\treq.open(verb, url, true);\r\n\t\treq.setRequestHeader('Content-Type', 'application/json');\r\n\t\treq.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\r\n\t\t\r\n\t\tif (headers)\r\n\t\t\tfor (var key in headers)\r\n\t\t\t\treq.setRequestHeader(key, headers[key]);\r\n\t\t\r\n\t\treq.onerror = function(){\r\n\t\t\treject(new Error('No server response.'));\r\n\t\t}\r\n\t\t\r\n\t\treq.onload = function(){\r\n\t\t\ttry {\r\n\t\t\t\tvar response = JSON.parse(req.responseText);\r\n\t\t\t} catch (e) {\r\n\t\t\t\treject(new Error('Invalid JSON response. Responded:\\n\\n'+req.responseText));\r\n\t\t\t}\r\n\t\t\tif (req.status>=200 && req.status<400 && response) {\r\n\t\t\t\tresolve(response);\r\n\t\t\t} else {\r\n\t\t\t\treject(new Error(response));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treq.send(body);\r\n\t})\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/request.js","\r\nimport {shouldEmbedMobile, def, cssUnit} from './utils'\r\nimport Builder from './Builder'\r\nimport SVGButton from './SVGButton'\r\n\r\nexport default class StickyBuilder extends Builder\r\n{\r\n\tsticky = null; // another container holding this.cont and this.button, necessary for sticky\r\n\tbutton = null; // the container of the button used, as set up in init\r\n\tinit = null; // the initialization object used, normalized to defaults\r\n\t\r\n\tconstructor(token, init)\r\n\t{\r\n\t\t// create the container that holds the poll builder part\r\n\t\tvar cont = document.createElement('div');\r\n\t\t\r\n\t\t// if init.useMobile is null then detect on our own, otherwise honor their manual setting\r\n\t\tvar useMobile = isEmpty(init.useMobile) ? shouldEmbedMobile() : init.useMobile;\r\n\t\t\r\n\t\t// super, and create the builder\r\n\t\tsuper(cont, token, {useMobile:useMobile});\r\n\t\t\r\n\t\t\r\n\t\tthis.promise.then(iframe=>\r\n\t\t{\r\n\t\t\t// if it didn't embed, that's the end of it\r\n\t\t\tif (!this.iframe) return;\r\n\t\t\t\r\n\t\t\t// allow them to just use a string for init to use for buttons\r\n\t\t\tif (typeof init === 'string')\r\n\t\t\t\tinit = {addButtons:init};\r\n\t\t\t\r\n\t\t\t// add defaults to init for any not provided\r\n\t\t\tinit = handleDefaults(init, this.metadata);\r\n\t\t\t\r\n\t\t\t// if not drag and drop AND no addButtons given, then we don't want to embed because there won't be an adding method\r\n\t\t\tif (!pollBuilder.dragAndDropSupported() && !init.addButtons) {\r\n\t\t\t\tconsole.warn(\"Poll builder will not be embedded because this browser/device is not capable of drag and drop adding, and no other adding method is being used. Try the init option `addButtons` to allow adding that way.\");\r\n\t\t\t\treturn {promise:Promise.resolve(null)};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.init = init;\r\n\t\t\tthis.sticky = sticky;\r\n\t\t\t\r\n\t\t\t// apply styles to cont\r\n\t\t\tcont.style.cssText = this.mobile ? init.mobileBuilderStyles : init.builderStyles;\r\n\t\t\t\r\n\t\t\t// add the cont transition event loop so that it doesn't animate from load\r\n\t\t\tsetTimeout(()=>{ cont.style.transition = `height 400ms ease-in-out, opacity 400ms`; }, 0);\r\n\t\t\t\r\n\t\t\tif (init.addButtons)\r\n\t\t\t\tpollBuilder.addButtons(init.addButtons)\r\n\t\t\t\r\n\t\t\t// create main container that holds it all\r\n\t\t\tvar sticky = this.sticky = document.createElement('div');\r\n\t\t\tsticky.id = 'pollbuilder-sticky-'+this.index;\r\n\t\t\tsticky.className = 'pollbuilder-sticky';\r\n\t\t\tif (this.mobile)\r\n\t\t\t\tsticky.className += ' pollbuilder-sticky-mobile';\r\n\t\t\t\r\n\t\t\t// now add the cont to it, and add it to the page\r\n\t\t\tsticky.appendChild(cont);\r\n\t\t\tdocument.body.appendChild(sticky);\r\n\t\t\r\n\t\t\t// we won't know the data width until the iframe randers and gives it to us via this event\r\n\t\t\tthis.addEventListener('pb:sizechange', this._onResize2);\r\n\t\t\tthis.addEventListener('pb:sizechange', this._onFirstResize);\r\n\t\t\t\r\n\t\t\t// listen for a begindrag and open it\r\n\t\t\tthis.addEventListener('pb:begindrag', function(){ pollBuilder.maximizeSticky(this.index); });\r\n\t\t\t\r\n\t\t\t// and listen for pb:closebuilder and pb:openbuilder for the builder wanting to close/open itself\r\n\t\t\tthis.addEventListener('pb:closebuilder', function(){ pollBuilder.minimizeSticky(this.index); })\r\n\t\t\tthis.addEventListener('pb:openbuilder',  function(){ pollBuilder.maximizeSticky(this.index); })\r\n\t\t\t\r\n\t\t\t// now start out minimized\r\n\t\t\tpollBuilder.minimizeSticky(this.index);\r\n\t\t\t\r\n\t\t\t// float it to one side depending on the side it's on, cuz it makes it animate better\r\n\t\t\tthis.iframe.style.float = init.side==='right' ? 'left' : 'right';\r\n\t\t})\r\n\t}\r\n\t\r\n\tminimize()\r\n\t{\r\n\t\tif (this.maxxed && this.loaded)\r\n\t\t{\r\n\t\t\tthis.iframe.contentWindow.postMessage({event:'stickyminimize'}, pollBuilder._targetOrigin);\r\n\t\t\tvar event = {type:'pb:minimized'};\r\n\t\t\tthis.dispatchEvent(event);\r\n\t\t\tpollBuilder.dispatchEvent(event);\r\n\t\t}\r\n\t\t\r\n\t\tthis.sticky.setAttribute('data-maximized', '0');\r\n\t\tthis.button && this.button.setAttribute('data-maximized', '0');\r\n\t\tthis.cont.style.height = '0px';\r\n\t}\r\n\t\r\n\tmaximize()\r\n\t{\r\n\t\tvar maxW = this.cont.getAttribute('data-width');\r\n\t\tvar maxH = this.cont.getAttribute('data-height');\r\n\t\t\r\n\t\tif (!this.maxxed)\r\n\t\t{\r\n\t\t\tthis.iframe.contentWindow.postMessage({event:'stickymaximize'}, pollBuilder._targetOrigin);\r\n\t\t\tvar event = {type:'pb:maximized'};\r\n\t\t\tthis.dispatchEvent(event);\r\n\t\t\tpollBuilder.dispatchEvent(event);\r\n\t\t}\r\n\t\t\r\n\t\tthis.sticky.setAttribute('data-maximized', '1');\r\n\t\tthis.button && this.button.setAttribute('data-maximized', '1');\r\n\t\tthis.cont.style.height = maxH+'px';\r\n\t}\r\n\t\r\n\ttoggle()\r\n\t{\r\n\t\tif (this.maxxed)\r\n\t\t\tthis.minimize();\r\n\t\telse\r\n\t\t\tthis.maximize();\r\n\t}\r\n\t\r\n\tget maxxed()\r\n\t{\r\n\t\treturn this.sticky.getAttribute('data-maximized') != false;\r\n\t}\r\n\t\r\n\t\r\n\t// INTERNAL -----------------------------------------------------------\r\n\t\r\n\t_onResize2 = (evt) =>\r\n\t{\r\n\t\t// track the width needed for the builder, or height since that's needed for mobile one\r\n\t\tthis.cont.setAttribute('data-width', evt.data.width);\r\n\t\tthis.cont.setAttribute('data-height', evt.data.height);\r\n\t}\r\n\t\r\n\t_onFirstResize = (evt) =>\r\n\t{\r\n\t\tvar init = this.init;\r\n\t\t\r\n\t\t// create the container and contents of the poll builder button\r\n\t\tvar btn = this.button = document.createElement('div');\r\n\t\tbtn.style.cssText = this.mobile ? init.mobileButtonStyles : init.buttonStyles;\r\n\t\tbtn.className = 'pollbuilder-button pollbuilder-button-hidden';\r\n\t\tbtn.id = `pollbuilder-button-${this.index}`;\r\n\t\tbtn.addEventListener('click', pollBuilder.toggleSticky.bind(null, this.index));\r\n\t\tsetTimeout(()=>{ btn.className = 'pollbuilder-button'; }, init.buttonDelay);\r\n\t\t\r\n\t\t// fill that container based on the method from the init object\r\n\t\tif (init.buttonMarkup) {\r\n\t\t\tbtn.innerHTML = init.buttonMarkup;\r\n\t\t} else if (init.buttonImage) {\r\n\t\t\tvar attr2xMain = init.buttonImages2x ? 'onload=\"pollBuilder.utils.halfenImage(this);this.style.opacity=1;\"' : 'onload=\"this.style.opacity=1;\"';\r\n\t\t\tvar attr2x = init.buttonImages2x ? 'onload=\"pollBuilder.utils.halfenImage(this);\"' : '';\r\n\t\t\tbtn.innerHTML = `<img src=\"${init.buttonImage}\" class=\"pollbuilder-button-state pollbuilder-button-normal\" ${attr2xMain}/>`;\r\n\t\t\t\r\n\t\t\tif (init.buttonImageHover)\r\n\t\t\t\tbtn.innerHTML += `<img src=\"${init.buttonImageHover}\" class=\"pollbuilder-button-state pollbuilder-button-hover\" ${attr2x}/>`;\r\n\t\t\tif (init.buttonImageActive)\r\n\t\t\t\tbtn.innerHTML += `<img src=\"${init.buttonImageActive}\" class=\"pollbuilder-button-state pollbuilder-button-active\" ${attr2x}/>`;\r\n\t\t} else {\r\n\t\t\tconsole.warn(`No button image or markup was given for the poll builder!`);\r\n\t\t}\r\n\t\t\r\n\t\tbtn.innerHTML += cssToAdd();\r\n\t\tbtn.innerHTML += `\r\n\t\t\t<style>\r\n\t\t\t\t#pollbuilder-sticky-${this.index} {\r\n\t\t\t\t\tposition: ${init.position};\r\n\t\t\t\t\tbackground-color: ${init.backgroundColor};\r\n\t\t\t\t\tz-index: ${init.zIndex};\r\n\t\t\t\t}\r\n\t\t\t\t#pollbuilder-sticky-${this.index}:not(.pollbuilder-sticky-mobile) {\r\n\t\t\t\t\tborder-radius: 6px;\r\n\t\t\t\t}\r\n\t\t\t\t#pollbuilder-button-${this.index} {\r\n\t\t\t\t\tposition: ${init.position};\r\n\t\t\t\t\t${init.side==='left' ? 'left' : 'right'}: ${cssUnit(init.buttonOffsetX)};\r\n\t\t\t\t\t${init.side==='left' ? 'right' : 'left'}: auto;\r\n\t\t\t\t\t${init.fromTop ? 'top' : 'bottom'}: ${cssUnit(init.buttonOffsetY)};\r\n\t\t\t\t\t${init.fromTop ? 'bottom' : 'top'}: auto;\r\n\t\t\t\t\ttransition: opacity 200ms;\r\n\t\t\t\t\tz-index: ${init.zIndex};\r\n\t\t\t\t}\r\n\t\t\t\t#pollbuilder-button-${this.index}[data-maximized=\"1\"],\r\n\t\t\t\t#pollbuilder-button-${this.index}.pollbuilder-button-hidden {\r\n\t\t\t\t\topacity: 0 !important;\r\n\t\t\t\t\tpointer-events: none;\r\n\t\t\t\t}\r\n\t\t\t</style>` // Normal CSS, seperate because of init options making each builder different\r\n\t\tif (this.mobile) {\r\n\t\t\tbtn.innerHTML += `\r\n\t\t\t<style>\r\n\t\t\t\t\r\n\t\t\t</style>` // Mobile CSS, separate to make it only apply to mobile ones, and future applying of init options\r\n\t\t} else {\r\n\t\t\tbtn.innerHTML += `\r\n\t\t\t<style>\r\n\t\t\t\t#pollbuilder-sticky-${this.index}[data-maximized=\"1\"] { opacity: 1; transition: opacity 300ms ease 150ms; }\r\n\t\t\t\t#pollbuilder-sticky-${this.index}[data-maximized=\"0\"] { opacity: 0; transition: opacity 300ms; }\r\n\t\t\t\t#pollbuilder-sticky-${this.index} {\r\n\t\t\t\t\t${init.side==='left' ? 'left' : 'right'}: ${cssUnit(init.builderOffsetX)};\r\n\t\t\t\t\t${init.side==='left' ? 'right' : 'left'}: auto;\r\n\t\t\t\t\t${init.fromTop ? 'top' : 'bottom'}: ${cssUnit(init.builderOffsetY)};\r\n\t\t\t\t\t${init.fromTop ? 'bottom' : 'top'}: auto;\r\n\t\t\t\t}\r\n\t\t\t</style>` // Desktop CSS, only applies to desktop\r\n\t\t}\r\n\t\t\r\n\t\tdocument.body.insertBefore(btn, this.sticky);\r\n\t\t\r\n\t\t// remove listener\r\n\t\tthis.removeEventListener('pb:sizechange', this._onFirstResize);\r\n\t}\r\n}\r\n\r\n\r\n// STATIC PRIVATE -----------------------------------------------------------\r\n\r\nfunction handleDefaults(init, metadata)\r\n{\r\n\tinit = init || {};\r\n\tinit.side = def(init.side, 'right');\r\n\tinit.fromTop = def(init.fromTop, false);\r\n\tinit.buttonOffsetX = def(init.buttonOffsetX, 20);\r\n\tinit.buttonOffsetY = def(init.buttonOffsetY, 20);\r\n\tinit.builderOffsetX = def(init.builderOffsetX, 20);\r\n\tinit.builderOffsetY = def(init.builderOffsetY, 20);\r\n\tinit.position = def(init.position, 'fixed');\r\n\tinit.zIndex = def(init.zIndex, 99);\r\n\tinit.buttonImage = def(init.buttonImage, null);\r\n\tinit.buttonImageHover = def(init.buttonImageHover, null);\r\n\tinit.buttonImageActive = def(init.buttonImageActive, null);\r\n\tinit.buttonImages2x = def(init.buttonImages2x, false);\r\n\tinit.buttonMarkup = def(init.buttonMarkup, null);\r\n\tinit.backgroundColor = def(init.backgroundColor, '#fff');\r\n\tinit.addButtons = def(init.addButtons, false);\r\n\tinit.useMobile = def(init.useMobile, null);\r\n\tinit.buttonColor = def(init.buttonColor, metadata.theme.buttonColor || (!init.highlight?'#fff':init.highlight));\r\n\tinit.invertButton = def(init.invertButton, isEmpty(metadata.theme.invertButton) ? !!init.highlight : metadata.theme.invertButton);\r\n\tinit.highlight = def(init.highlight, metadata.theme.highlight || '#000');\r\n\tinit.buttonStyles = def(init.buttonStyles, 'box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.15);');\r\n\tinit.builderStyles = def(init.builderStyles, `box-shadow: 1px 0 1px ${init.highlight},-1px 0 1px ${init.highlight},0 1px 1px ${init.highlight},0 -1px 1px ${init.highlight}, 3px 3px 3px rgba(0, 0, 0, 0.15); border-radius: 6px;`);\r\n\tinit.mobileButtonStyles = def(init.mobileButtonStyles, init.buttonStyles);\r\n\tinit.mobileBuilderStyles = def(init.mobileBuilderStyles, `box-shadow: 1px 0 1px ${init.highlight},-1px 0 1px ${init.highlight},0 1px 1px ${init.highlight},0 -1px 1px ${init.highlight}, 0 0 6px 0 rgba(0, 0, 0, 0.15);`);\r\n\tinit.buttonDelay = def(init.buttonDelay, 0);\r\n\t\r\n\t// if button is not set at all by user, then use default values\r\n\tif (!init.buttonImage && !init.buttonImageHover && !init.buttonImageActive && !init.buttonImages2x && !init.buttonMarkup) {\r\n\t\tinit.buttonMarkup = new SVGButton('pollbuilder-button-normal', init.buttonColor, 0, !init.invertButton) + new SVGButton('pollbuilder-button-hover', init.buttonColor, 0.3, !init.invertButton);\r\n\t\tinit.buttonStyles += 'border-radius:999px; opacity:0; width:80px; height:80px;';\r\n\t\tinit.mobileButtonStyles += 'border-radius:999px; opacity:0; width:80px; height:80px;';\r\n\t}\r\n\t\r\n\treturn init;\r\n}\r\n\r\nfunction isEmpty(val)\r\n{\r\n\treturn typeof val === 'undefined' || val === null;\r\n}\r\n\r\n\r\n\r\nvar cssAdded = false;\r\nfunction cssToAdd()\r\n{\r\n\tif (!cssAdded)\r\n\t{\r\n\t\tcssAdded = true;\r\n\t\treturn `\r\n\t\t\t<style>\r\n\t\t\t\t.pollbuilder-button {\r\n\t\t\t\t\tposition: fixed;\r\n\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t.pollbuilder-button .pollbuilder-button-state-cont {\r\n\t\t\t\t\ttransition: opacity 300ms;\r\n\t\t\t\t\topacity: 1;\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t}\r\n\t\t\t\t.pollbuilder-button .pollbuilder-button-state-cont.pollbuilder-button-state-loading {\r\n\t\t\t\t\topacity: 0 !important;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t.pollbuilder-button .pollbuilder-button-state {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\tmax-width: none;\r\n\t\t\t\t\tmax-height: none;\r\n\t\t\t\t\twidth: auto;\r\n\t\t\t\t\theight: auto;\r\n\t\t\t\t\ttransition: opacity 200ms;\r\n\t\t\t\t}\r\n\t\t\t\t.pollbuilder-button svg.pollbuilder-button-state {\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t.pollbuilder-button .pollbuilder-button-normal {\r\n\t\t\t\t\topacity: 1;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t.pollbuilder-button .pollbuilder-button-state.pollbuilder-button-hover,\r\n\t\t\t\t.pollbuilder-button .pollbuilder-button-state.pollbuilder-button-active {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\tleft: 0;\r\n\t\t\t\t\ttop: 0;\r\n\t\t\t\t\topacity: 0;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t.pollbuilder-button:hover .pollbuilder-button-state.pollbuilder-button-hover { opacity:1; }\r\n\t\t\t\t.pollbuilder-button:active .pollbuilder-button-state.pollbuilder-button-active { opacity:1; }\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t.pollbuilder-sticky-mobile {\r\n\t\t\t\t\ttop: auto !important;\r\n\t\t\t\t\tbottom: 0px !important;\r\n\t\t\t\t\tmin-width: 320px;\r\n\t\t\t\t}\r\n\t\t\t\t@media screen and (max-width: 440px) {\r\n\t\t\t\t\t.pollbuilder-sticky-mobile {\r\n\t\t\t\t\t\twidth: 100% !important;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t@media screen and (min-width: 441px) {\r\n\t\t\t\t\t.pollbuilder-sticky-mobile {\r\n\t\t\t\t\t\twidth: 440px !important;\r\n\t\t\t\t\t\tleft: 50%;\r\n\t\t\t\t\t\ttransform: translateX(-50%);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t</style>`\r\n\t} else {\r\n\t\treturn '';\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/StickyBuilder.js","\r\nexport default class SVGButton\r\n{\r\n\tconstructor(className, circleBackground = '#fff', washPercent = 0, blackText = true, fadeBackground = '#fff')\r\n\t{\r\n\t\tthis.className = className;\r\n\t\tthis.circleBackground = circleBackground;\r\n\t\tthis.washPercent = washPercent;\r\n\t\tthis.blackText = blackText;console.log('black:', blackText)\r\n\t\tthis.fadeBackground = fadeBackground;\r\n\t}\r\n\t\r\n\ttoString()\r\n\t{\r\n\t\treturn `\r\n\t\t<div class=\"pollbuilder-button-state-cont pollbuilder-button-state-loading\">\r\n\t\t\t<svg class=\"pollbuilder-button-state ${this.className}\" viewBox=\"0 0 80 80\" style=\"background-color:#ffffff00\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" x=\"0px\" y=\"0px\" width=\"80px\" height=\"80px\">\r\n\t\t\t\t<circle cx=\"40\" cy=\"40\" r=\"40\" fill=\"${this.fadeBackground}\" />\r\n\t\t\t\t<circle cx=\"40\" cy=\"40\" r=\"38.5\" fill=\"${this.circleBackground}\" stroke=\"${this.blackText ? '#000' : '#fff'}\" stroke-width=\"1.5\" opacity=\"${1-this.washPercent}\" />\r\n\t\t\t</svg>\r\n\t\t\t<img style=\"position:absolute; top:27px; left:13px; width:56px; height:29px; opacity:${1-this.washPercent};\" src=\"${pollBuilder._pollBuilderURL}/assets/other/poll_your_friends-${this.blackText ? 'black' : 'white'}.png\" onload=\"${this.imgLoadCode()}\"/>\r\n\t\t</div>`\r\n\t}\r\n\t\r\n\timgLoadCode()\r\n\t{\r\n\t\t// removes the 'pollbuilder-button-state-loading' class once the image is loaded, and sets the opacity of the main button container to 1 (since it starts at 0 when using default sticker)\r\n\t\treturn `this.parentNode.setAttribute('class', this.parentNode.getAttribute('class').replace(/ pollbuilder-button-state-loading/, '')); if(this.parentNode.parentNode) this.parentNode.parentNode.style.opacity = 1;`;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/SVGButton.js","/**\r\nCopyright (c) 2014 Taylor Hakes\r\nCopyright (c) 2014 Forbes Lindesay\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\n(function (root) {\r\n\r\n  // Store setTimeout reference so promise-polyfill will be unaffected by\r\n  // other code modifying setTimeout (like sinon.useFakeTimers())\r\n  var setTimeoutFunc = setTimeout;\r\n\r\n  function noop() {}\r\n  \r\n  // Polyfill for Function.prototype.bind\r\n  function bind(fn, thisArg) {\r\n    return function () {\r\n      fn.apply(thisArg, arguments);\r\n    };\r\n  }\r\n\r\n  function Promise(fn) {\r\n    if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\r\n    if (typeof fn !== 'function') throw new TypeError('not a function');\r\n    this._state = 0;\r\n    this._handled = false;\r\n    this._value = undefined;\r\n    this._deferreds = [];\r\n\r\n    doResolve(fn, this);\r\n  }\r\n\r\n  function handle(self, deferred) {\r\n    while (self._state === 3) {\r\n      self = self._value;\r\n    }\r\n    if (self._state === 0) {\r\n      self._deferreds.push(deferred);\r\n      return;\r\n    }\r\n    self._handled = true;\r\n    Promise._immediateFn(function () {\r\n      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\r\n      if (cb === null) {\r\n        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\r\n        return;\r\n      }\r\n      var ret;\r\n      try {\r\n        ret = cb(self._value);\r\n      } catch (e) {\r\n        reject(deferred.promise, e);\r\n        return;\r\n      }\r\n      resolve(deferred.promise, ret);\r\n    });\r\n  }\r\n\r\n  function resolve(self, newValue) {\r\n    try {\r\n      // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\r\n      if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');\r\n      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\r\n        var then = newValue.then;\r\n        if (newValue instanceof Promise) {\r\n          self._state = 3;\r\n          self._value = newValue;\r\n          finale(self);\r\n          return;\r\n        } else if (typeof then === 'function') {\r\n          doResolve(bind(then, newValue), self);\r\n          return;\r\n        }\r\n      }\r\n      self._state = 1;\r\n      self._value = newValue;\r\n      finale(self);\r\n    } catch (e) {\r\n      reject(self, e);\r\n    }\r\n  }\r\n\r\n  function reject(self, newValue) {\r\n    self._state = 2;\r\n    self._value = newValue;\r\n    finale(self);\r\n  }\r\n\r\n  function finale(self) {\r\n    if (self._state === 2 && self._deferreds.length === 0) {\r\n      Promise._immediateFn(function() {\r\n        if (!self._handled) {\r\n          Promise._unhandledRejectionFn(self._value);\r\n        }\r\n      });\r\n    }\r\n\r\n    for (var i = 0, len = self._deferreds.length; i < len; i++) {\r\n      handle(self, self._deferreds[i]);\r\n    }\r\n    self._deferreds = null;\r\n  }\r\n\r\n  function Handler(onFulfilled, onRejected, promise) {\r\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\r\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\r\n    this.promise = promise;\r\n  }\r\n\r\n  /**\r\n   * Take a potentially misbehaving resolver function and make sure\r\n   * onFulfilled and onRejected are only called once.\r\n   *\r\n   * Makes no guarantees about asynchrony.\r\n   */\r\n  function doResolve(fn, self) {\r\n    var done = false;\r\n    try {\r\n      fn(function (value) {\r\n        if (done) return;\r\n        done = true;\r\n        resolve(self, value);\r\n      }, function (reason) {\r\n        if (done) return;\r\n        done = true;\r\n        reject(self, reason);\r\n      });\r\n    } catch (ex) {\r\n      if (done) return;\r\n      done = true;\r\n      reject(self, ex);\r\n    }\r\n  }\r\n\r\n  Promise.prototype['catch'] = function (onRejected) {\r\n    return this.then(null, onRejected);\r\n  };\r\n\r\n  Promise.prototype.then = function (onFulfilled, onRejected) {\r\n    var prom = new (this.constructor)(noop);\r\n\r\n    handle(this, new Handler(onFulfilled, onRejected, prom));\r\n    return prom;\r\n  };\r\n\r\n  Promise.all = function (arr) {\r\n    var args = Array.prototype.slice.call(arr);\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      if (args.length === 0) return resolve([]);\r\n      var remaining = args.length;\r\n\r\n      function res(i, val) {\r\n        try {\r\n          if (val && (typeof val === 'object' || typeof val === 'function')) {\r\n            var then = val.then;\r\n            if (typeof then === 'function') {\r\n              then.call(val, function (val) {\r\n                res(i, val);\r\n              }, reject);\r\n              return;\r\n            }\r\n          }\r\n          args[i] = val;\r\n          if (--remaining === 0) {\r\n            resolve(args);\r\n          }\r\n        } catch (ex) {\r\n          reject(ex);\r\n        }\r\n      }\r\n\r\n      for (var i = 0; i < args.length; i++) {\r\n        res(i, args[i]);\r\n      }\r\n    });\r\n  };\r\n\r\n  Promise.resolve = function (value) {\r\n    if (value && typeof value === 'object' && value.constructor === Promise) {\r\n      return value;\r\n    }\r\n\r\n    return new Promise(function (resolve) {\r\n      resolve(value);\r\n    });\r\n  };\r\n\r\n  Promise.reject = function (value) {\r\n    return new Promise(function (resolve, reject) {\r\n      reject(value);\r\n    });\r\n  };\r\n\r\n  Promise.race = function (values) {\r\n    return new Promise(function (resolve, reject) {\r\n      for (var i = 0, len = values.length; i < len; i++) {\r\n        values[i].then(resolve, reject);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Use polyfill for setImmediate for performance gains\r\n  Promise._immediateFn = (typeof setImmediate === 'function' && function (fn) { setImmediate(fn); }) ||\r\n    function (fn) {\r\n      setTimeoutFunc(fn, 0);\r\n    };\r\n\r\n  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\r\n    if (typeof console !== 'undefined' && console) {\r\n      console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set the immediate function to execute callbacks\r\n   * @param fn {function} Function to execute\r\n   * @deprecated\r\n   */\r\n  Promise._setImmediateFn = function _setImmediateFn(fn) {\r\n    Promise._immediateFn = fn;\r\n  };\r\n\r\n  /**\r\n   * Change the function to execute on unhandled rejection\r\n   * @param {function} fn Function to execute on unhandled rejection\r\n   * @deprecated\r\n   */\r\n  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\r\n    Promise._unhandledRejectionFn = fn;\r\n  };\r\n  \r\n  // modified from original to act as actual polyfill instead of UMD\r\n  if (window && !window.Promise)\r\n\t  window.Promise = Promise;\r\n\r\n})(this);\n\n\n// WEBPACK FOOTER //\n// ./src/Promise.js","var apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\nexports.setImmediate = setImmediate;\nexports.clearImmediate = clearImmediate;\n\n\n\n// WEBPACK FOOTER //\n// ./~/timers-browserify/main.js","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n// WEBPACK FOOTER //\n// ./~/setimmediate/setImmediate.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n// WEBPACK FOOTER //\n// ./~/process/browser.js"],"sourceRoot":""}