{"version":3,"sources":["webpack:///webpack/bootstrap dcc90da09eea7bfc7938","webpack:///./src/pollBuilder.js","webpack:///./src/EventDispatcher.js","webpack:///./src/utils.js","webpack:///./src/request.js","webpack:///./src/Promise.js","webpack:///./~/timers-browserify/main.js","webpack:///./~/setimmediate/setImmediate.js","webpack:///./~/process/browser.js"],"names":["defaultImage","defaultHover","PollBuilder","version","isSupported","_apiURL","_pollBuilderURL","_targetOrigin","ident","iframe","iframes","document","querySelector","contentWindow","postMessage","event","pollBuilder","cont","token","console","warn","Promise","resolve","reject","then","response","window","style","getComputedStyle","getPropertyValue","position","index","length","id","urlWVars","iframeStyle","layoverStyle","addHTML","innerHTML","addEventListener","drop","dragover","dragleave","push","dispatcher","dispatchers","layovers","pollBuilderEventDispatcher","width","height","init","side","fromTop","verticalPercent","verticalOffset","zIndex","buttonMarkup","buttonImage","buttonImageHover","buttonCloseImage","buttonCloseImageHover","buttonBottom","buttonStyles","builderStyles","createElement","body","appendChild","pb","cssText","className","overflow","setTimeout","transition","btn","cursor","toggleSticky","bind","prom","embed","maximizeSticky","setAttribute","offsetWidth","minimizeSticky","float","getElementById","getElementsByClassName","maxW","getAttribute","maxxed","hypeDragData","evt","JSON","parse","e","target","currentTarget","data","stopPropagation","preventDefault","dragstart","hasAttribute","dataTransfer","setData","i","pointerEvents","display","dispatchEvent","type","j","dragend","obj","validOrigin","origin","wildTarget","dataIsObj","fromPollFlag","fromPoll","isEvent","EventDispatcher","callbacks","callback","indexOf","arr","splice","ii","call","def","val","dflt","hasDraggable","isKnownMobile","test","navigator","userAgent","hasEvents","isEventSupported","eventName","element","TAGNAMES","removeAttribute","undefined","request","verb","url","headers","stringify","req","XMLHttpRequest","open","setRequestHeader","key","onerror","Error","onload","responseText","status","send","root","setTimeoutFunc","noop","fn","thisArg","apply","arguments","TypeError","_state","_handled","_value","_deferreds","doResolve","handle","self","deferred","_immediateFn","cb","onFulfilled","onRejected","promise","ret","newValue","finale","_unhandledRejectionFn","len","Handler","done","value","reason","ex","prototype","constructor","all","args","Array","slice","remaining","res","race","values","setImmediate","err","_setImmediateFn","_setUnhandledRejectionFn","module","exports","Function","Timeout","clearTimeout","setInterval","clearInterval","timeout","close","clearFn","_id","_clearFn","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","onTimeout","_onTimeout","require","clearImmediate","global","nextHandle","tasksByHandle","currentlyRunningATask","doc","registerImmediate","task","run","runIfPresent","installNextTickImplementation","process","nextTick","canUsePostMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","installPostMessageImplementation","messagePrefix","Math","random","onGlobalMessage","source","attachEvent","installMessageChannelImplementation","channel","MessageChannel","port1","port2","installReadyStateChangeImplementation","html","documentElement","script","onreadystatechange","removeChild","installSetTimeoutImplementation","attachTo","Object","getPrototypeOf","toString","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","concat","drainQueue","Item","array","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","cwd","chdir","dir","umask"],"mappings":"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","file":"hyperr.pollbuilder.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dcc90da09eea7bfc7938","\r\n\r\n/*******************************************************\r\n * Copyright (C) 2016 PTP APP LLC - All Rights Reserved\r\n * Unauthorized copying of this file, in whole or in part, via any medium is strictly prohibited.\r\n * Proprietary and Confidential\r\n *******************************************************/\r\n \r\nimport EventDispatcher from './EventDispatcher';\r\nimport {isSupported, def} from './utils';\r\nimport request from './request';\r\nimport './Promise';\r\n\r\n// TODO: get these on a CDN somewhere\r\nvar defaultImage = '/testing/assets/btn.png';\r\nvar defaultHover = '/testing/assets/btn-over.png';\r\n\r\nclass PollBuilder extends EventDispatcher\r\n{\r\n\t// version is important so that poll-builder served from hyperr knows what script is in use\r\n\tversion = '1.0.0'\r\n\t\r\n\t// whether or not this component is supported\r\n\tisSupported = isSupported\r\n\t\r\n\t// private API, for setting the API and poll builder urls\r\n\t_apiURL = 'https://api.gethyperr.com' // prefix domain for the API\r\n\t_pollBuilderURL = 'http://pollbuilder.gethyperr.com' // prefix domain for the iframe\r\n\t_targetOrigin = 'http://pollbuilder.gethyperr.com' // target domain you want to allow communication from\r\n\t\r\n\t// requests for the poll builder to send a pb:data event with the raw state data, can use index/id/direct reference to choose iframe, otherwise uses 0\r\n\trequestData(ident)\r\n\t{\r\n\t\tident = ident || 0;\r\n\t\t\r\n\t\tvar iframe = ident;\r\n\t\tif (typeof ident === 'number')\r\n\t\t\tiframe = iframes[ident];\r\n\t\tif (typeof ident === 'string')\r\n\t\t\tiframe = document.querySelector(ident);\r\n\t\t\r\n\t\tiframe.contentWindow.postMessage({event:'requestdata'}, pollBuilder._targetOrigin)\r\n\t}\r\n\t\r\n\t// used to actually embed a poll builder in an element when manually used (i.e. no sticky)\r\n\tembed(cont, token)\r\n\t{\r\n\t\tif (!pollBuilder.isSupported())\r\n\t\t\tconsole.warn(\"This browser/device is not capable of using hyperr poll builder with drag and drop. You can use `pollBuilder.isSupported()` to determine this at runtime.\");\r\n\t\t\r\n\t\treturn new Promise((resolve, reject)=>\r\n\t\t{\r\n\t\t\trequest('GET', `${pollBuilder._apiURL}/builders/${token}/dimensions`).then((response)=>\r\n\t\t\t{\r\n\t\t\t\tif (typeof cont === 'string')\r\n\t\t\t\t\tcont = window.document.querySelector(cont);\r\n\t\t\t\t\r\n\t\t\t\tvar style = window.getComputedStyle(cont);\r\n\t\t\t\tif (style.getPropertyValue('position') === 'static') {\r\n\t\t\t\t\tconsole.warn('Embed container must not be set to the CSS `position:static;`. It will be changed to relative.');\r\n\t\t\t\t\tcont.style.position = 'relative';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar index = iframes.length;\r\n\t\t\t\tvar id = `pollbuilder-iframe-${index}`;\r\n\t\t\t\tvar urlWVars = `${pollBuilder._pollBuilderURL}/${token}?pollBuilderID=${id}&pollBuilderIndex=${index}&scriptVersion=${pollBuilder.version}`;\r\n\t\t\t\t\r\n\t\t\t\tvar iframeStyle = `border:none; outline:none; display:block;`;\r\n\t\t\t\tvar layoverStyle = `display:none; position:absolute; width:100%; height:100%; left:0; top:0;`;\r\n\t\t\t\tvar addHTML = `<iframe id=\"${id}\" src=\"${urlWVars}\" width=\"100%\" height=\"100%\" style=\"${iframeStyle}\"></iframe><div class=\"iframe-layover\" style=\"${layoverStyle}\"></div>`;\r\n\t\t\t\t\r\n\t\t\t\tcont.innerHTML = addHTML;\r\n\t\t\t\tcont.addEventListener('drop', drop, false);\r\n\t\t\t\tcont.addEventListener('dragover', dragover, false);\r\n\t\t\t\tcont.addEventListener('dragleave', dragleave, false);\r\n\t\t\t\tvar iframe = cont.querySelector('iframe');\r\n\t\t\t\tiframes.push(iframe);\r\n\t\t\t\tvar dispatcher = new EventDispatcher();\r\n\t\t\t\tdispatchers.push(dispatcher);\r\n\t\t\t\tlayovers.push(cont.querySelector('.iframe-layover'));\r\n\t\t\t\tiframe.pollBuilderEventDispatcher = dispatcher;\r\n\t\t\t\tdispatcher.iframe = iframe;\r\n\t\t\t\tiframe.style.width = response.width+'px';\r\n\t\t\t\tiframe.style.height = response.height+'px';\r\n\t\t\t\t\r\n\t\t\t\tresolve(iframe);\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\t\r\n\t// an easier way to use, creates a sticky version with certain data\r\n\tembedSticky(token, init)\r\n\t{\r\n\t\tinit = init || {};\r\n\t\tinit.side = def(init.side, 'right');\r\n\t\tinit.fromTop = def(init.fromTop, false);\r\n\t\tinit.verticalPercent = def(init.verticalPercent, 0);\r\n\t\tinit.verticalOffset = def(init.verticalOffset, 10);\r\n\t\tinit.position = def(init.position, 'fixed');\r\n\t\tinit.zIndex = def(init.zIndex+'', '99');\r\n\t\tinit.buttonMarkup = def(init.buttonMarkup, null);\r\n\t\tinit.buttonImage = def(init.buttonImage, defaultImage);\r\n\t\tinit.buttonImageHover = def(init.buttonImageHover, defaultHover);\r\n\t\tinit.buttonCloseImage = def(init.buttonImage, defaultImage);\r\n\t\tinit.buttonCloseImageHover = def(init.buttonImageHover, defaultHover);\r\n\t\tinit.buttonBottom = def(init.buttonBottom, false);\r\n\t\t\r\n\t\tinit.buttonStyles = def(init.buttonStyles, 'box-shadow:0 2px 5px rgba(0,0,0,0.25);');\r\n\t\tinit.builderStyles = def(init.builderStyles, 'box-shadow:0 1px 5px rgba(0,0,0,0.25);');\r\n\t\t\r\n\t\tvar index = iframes.length;\r\n\t\t\r\n\t\t// create main container that holds it all\r\n\t\tvar cont = document.createElement('div');\r\n\t\tcont.style.position = init.position;\r\n\t\tcont.style[init.side] = '0px';\r\n\t\tcont.style.zIndex = init.zIndex;\r\n\t\tcont.style[init.fromTop ? 'top' : 'bottom'] = `calc(${init.verticalPercent}% + ${init.verticalOffset}px)`;\r\n\t\tcont.id = 'pollbuilder-sticky-'+index;\r\n\t\tdocument.body.appendChild(cont);\r\n\t\t\r\n\t\t// create the container that holds the poll builder part\r\n\t\tvar pb = document.createElement('div');\r\n\t\tpb.style.cssText = init.buttonStyles;\r\n\t\tpb.className = 'poll-builder-instance';\r\n\t\tpb.style.overflow = 'hidden';\r\n\t\tsetTimeout(function(){ pb.style.transition = 'width 400ms'; }, 0); // add on event loop so that it doesn't animate from load\r\n\t\tcont.appendChild(pb);\r\n\t\t\r\n\t\t// create the container and contents of the poll builder button\r\n\t\tvar btn = document.createElement('div');\r\n\t\tbtn.style.cssText = init.builderStyles;\r\n\t\tbtn.className = 'poll-builder-button';\r\n\t\tbtn.style.position = 'absolute';\r\n\t\tbtn.style[init.side] = '100%';\r\n\t\tbtn.style.cursor = 'pointer';\r\n\t\tbtn.style[init.buttonBottom ? 'bottom' : 'top'] = '0';\r\n\t\tbtn.addEventListener('click', pollBuilder.toggleSticky.bind(null, index));\r\n\t\tif (init.buttonMarkup) {\r\n\t\t\tbtn.innerHTML = init.buttonMarkup;\r\n\t\t} else if (init.buttonImage && !init.buttonImageHover) {\r\n\t\t\tbtn.innerHTML = `<img src=\"${init.buttonImage}\" style=\"display:block;\"/>`;\r\n\t\t} else if (init.buttonImage && init.buttonImageHover) {\r\n\t\t\tbtn.innerHTML = `<img src=\"${init.buttonImage}\" style=\"display:block;\"/><img style=\"display:block;position:absolute;left:0;top:0;opacity:0;transition:opacity 200ms;\" onmouseover=\"this.style.opacity=1;\" onmouseout=\"this.style.opacity=0;\" src=\"${init.buttonImageHover}\"/>`;\r\n\t\t} else {\r\n\t\t\tconsole.warn(`No button image or markup was given for the poll builder!`);\r\n\t\t}\r\n\t\tcont.appendChild(btn);\r\n\t\t\r\n\t\t// embed the poll builder where we want it...\r\n\t\tvar prom = pollBuilder.embed(pb, token);\r\n\t\tprom.then(iframe=>\r\n\t\t{\r\n\t\t\t// listen for a begindrag and open it\r\n\t\t\tdispatchers[index].addEventListener('pb:begindrag', function(){ pollBuilder.maximizeSticky(index); });\r\n\t\t\t\r\n\t\t\t// track the width needed for the builder\r\n\t\t\tpb.setAttribute('data-width', cont.offsetWidth);\r\n\t\t\t\r\n\t\t\t// now start out minimized\r\n\t\t\tpollBuilder.minimizeSticky(index);\r\n\t\t\t\r\n\t\t\t// float it to one side depending on the side it's on, cuz it makes it animate better\r\n\t\t\tiframe.style.float = init.side==='right' ? 'left' : 'right';\r\n\t\t})\r\n\t\t\r\n\t\treturn prom;\r\n\t}\r\n\r\n\tminimizeSticky(index)\r\n\t{\r\n\t\tindex = index || 0;\r\n\t\tvar cont = document.getElementById('pollbuilder-sticky-'+index);\r\n\t\tif (!cont) return;\r\n\t\tvar pb = cont.getElementsByClassName('poll-builder-instance')[0];\r\n\t\tpb.setAttribute('data-maximized', '0');\r\n\t\tpb.style.width = '0px';\r\n\t}\r\n\r\n\tmaximizeSticky(index)\r\n\t{\r\n\t\tindex = index || 0;\r\n\t\tvar cont = document.getElementById('pollbuilder-sticky-'+index);\r\n\t\tif (!cont) return;\r\n\t\tvar pb = cont.getElementsByClassName('poll-builder-instance')[0];\r\n\t\tvar maxW = pb.getAttribute('data-width');\r\n\t\tpb.setAttribute('data-maximized', '1');\r\n\t\tpb.style.width = maxW+'px';\r\n\t}\r\n\r\n\ttoggleSticky(index)\r\n\t{\r\n\t\tindex = index || 0;\r\n\t\tvar cont = document.getElementById('pollbuilder-sticky-'+index);\r\n\t\tif (!cont) return;\r\n\t\tvar pb = cont.getElementsByClassName('poll-builder-instance')[0];\r\n\t\tvar maxxed = pb.getAttribute('data-maximized') != false;\r\n\t\tif (maxxed)\r\n\t\t\tpollBuilder.minimizeSticky(index);\r\n\t\telse\r\n\t\t\tpollBuilder.maximizeSticky(index);\r\n\t}\r\n}\r\n\r\n// create/export for usage\r\nvar pollBuilder = new PollBuilder();\r\nexport default pollBuilder;\r\nwindow.pollBuilder = pollBuilder;\r\n\r\n// need to keep a list of droppable iframes and their layovers in order to shut them off whenever dragging\r\nvar iframes = [];\r\nvar layovers = [];\r\nvar dispatchers = pollBuilder.dispatchers = [];\r\nvar hypeDragData = false;\r\n\r\n// ---------- the events/functions for the dropzone ---------\r\n\r\nfunction drop(evt)\r\n{\r\n\tif (!hypeDragData)\r\n\t\treturn;\r\n\t\r\n\ttry { hypeDragData = JSON.parse(hypeDragData); }\r\n\tcatch(e){}\r\n\t\r\n\tvar target = evt.currentTarget.querySelector('iframe')\r\n\ttarget.contentWindow.postMessage({event:'drop', data:hypeDragData}, pollBuilder._targetOrigin)\r\n\t\r\n\tevt.stopPropagation();\r\n\tevt.preventDefault();\r\n}\r\n\r\nfunction dragover(evt)\r\n{\r\n\tif (!hypeDragData)\r\n\t\treturn;\r\n\t\r\n\tvar target = evt.currentTarget.querySelector('iframe')\r\n\ttarget.contentWindow.postMessage({event:'dragover'}, pollBuilder._targetOrigin)\r\n\t\r\n\tevt.preventDefault();\r\n\treturn false;\r\n}\r\n\r\nfunction dragleave(evt)\r\n{\r\n\tif (!hypeDragData)\r\n\t\treturn;\r\n\t\r\n\tvar target = evt.currentTarget.querySelector('iframe')\r\n\ttarget.contentWindow.postMessage({event:'dragleave'}, pollBuilder._targetOrigin)\r\n\t\r\n\tevt.preventDefault();\r\n\treturn false;\r\n}\r\n\r\n// ------------------- generic drag starting/stopping to turn on/off iframes ----------------------\r\n\r\nfunction dragstart(evt)\r\n{\r\n\tif (!evt || !evt.target || !evt.target.hasAttribute || !evt.target.hasAttribute('data-poll-builder'))\r\n\t\treturn;\r\n\t\r\n\tvar data = evt.target.getAttribute('data-poll-builder')\r\n\t\r\n\tif (data)\r\n\t{\r\n\t\thypeDragData = data;\r\n\t\t\r\n\t\tif (evt.dataTransfer && evt.dataTransfer.setData)\r\n\t\t\tevt.dataTransfer.setData('text', data); // firefox needs dataTransfer data to work, but we don't actually use it\r\n\t\t\r\n\t\tvar i = iframes.length;\r\n\t\twhile (i--) {\r\n\t\t\tiframes[i].style.pointerEvents = 'none';\r\n\t\t\tlayovers[i].style.display = 'block';\r\n\t\t\tiframes[i].contentWindow.postMessage({event:'dragstart'}, pollBuilder._targetOrigin)\r\n\t\t}\r\n\t\t\r\n\t\tpollBuilder.dispatchEvent({type:'pb:begindrag'});\r\n\t\tvar j = dispatchers.length;\r\n\t\twhile (j--)\r\n\t\t\tdispatchers[j].dispatchEvent({type:'pb:begindrag'});\r\n\t}\r\n}\r\n\r\nfunction dragend(evt)\r\n{\r\n\tif (hypeDragData)\r\n\t{\r\n\t\thypeDragData = false;\r\n\t\t\r\n\t\tvar i = iframes.length;\r\n\t\twhile (i--) {\r\n\t\t\tiframes[i].style.pointerEvents = 'auto';\r\n\t\t\tlayovers[i].style.display = 'none';\r\n\t\t\tiframes[i].contentWindow.postMessage({event:'dragend'}, pollBuilder._targetOrigin)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nwindow.document.addEventListener('dragstart', dragstart, false);\r\nwindow.document.addEventListener('dragend', dragend, false);\r\n\r\n// ------------- deal with events from poll builder ------------\r\n\r\nwindow.addEventListener(\"message\", function(obj)\r\n{\r\n\tvar validOrigin = obj.origin === pollBuilder._targetOrigin;\r\n\tvar wildTarget = pollBuilder._targetOrigin === '*';\r\n\tvar dataIsObj = typeof obj.data === 'object';\r\n\tvar fromPollFlag = !!obj.data.fromPoll;\r\n\t\r\n\t// weed out messages not from poll builders\r\n\tif (!dataIsObj || !fromPollFlag || (!validOrigin && !wildTarget))\r\n\t\treturn;\r\n\t\r\n\t// if is flagged as an event, then dispatch it\r\n\tif (obj.data.isEvent)\r\n\t{\r\n\t\tvar event = obj.data.event;\r\n\t\tvar dispatcher = dispatchers[event.index];\r\n\t\tdelete event.index; // user doesn't need this, will only be possibly confused\r\n\t\tdispatcher.dispatchEvent(event);\r\n\t\tpollBuilder.dispatchEvent(event);\r\n\t}\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pollBuilder.js","\r\nexport default class EventDispatcher\r\n{\r\n\tcallbacks = {};\r\n\t\r\n\taddEventListener(type, callback)\r\n\t{\t\r\n\t\tif (!this.callbacks[type])\r\n\t\t\tthis.callbacks[type] = [];\r\n\t\t\r\n\t\tif (this.callbacks[type].indexOf(callback) === -1)\r\n\t\t\tthis.callbacks[type].push(callback);\r\n\t}\r\n\t\r\n\thasEventListener(type, callback)\r\n\t{\r\n\t\treturn this.callbacks[type] && this.callbacks[type].indexOf(callback) > -1;\r\n\t}\r\n\t\r\n\tremoveEventListener(type, callback)\r\n\t{\r\n\t\tvar arr = this.callbacks[type];\r\n\t\t\r\n\t\tif (arr)\r\n\t\t{\r\n\t\t\tvar i = arr.indexOf(callback);\r\n\t\t\t\r\n\t\t\tif (i > -1)\r\n\t\t\t\tarr.splice(i, 1);\r\n\t\t}\r\n\t}\r\n\t\r\n\tdispatchEvent(event)\r\n\t{\r\n\t\tvar arr = this.callbacks[event.type];\r\n\t\t\r\n\t\tif (arr)\r\n\t\t\tfor (var i=0, ii=arr.length; i < ii; i++)\r\n\t\t\t\tarr[i].call(this, event);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/EventDispatcher.js","\r\nexport function def(val, dflt) {\r\n\treturn typeof val === 'undefined' ? dflt : val;\r\n}\r\n\r\n\r\nexport function isSupported()\r\n{\r\n\tvar hasDraggable  = \"draggable\" in document.createElement(\"div\");\r\n\tvar isKnownMobile = /Mobile|Android|Slick\\/|Kindle|BlackBerry|Opera Mini|Opera Mobi/i.test(navigator.userAgent);\r\n\tvar hasEvents     = isEventSupported('dragstart') && isEventSupported('drop');\r\n\t\r\n\treturn hasDraggable && hasEvents && !isKnownMobile;\r\n}\r\n\r\n// isEventSupported code derived from https://github.com/kangax/iseventsupported\r\n// Copyright (c) 2009 Juriy Zaytsev, released open source under license: https://github.com/kangax/iseventsupported/blob/gh-pages/LICENSE\r\nfunction isEventSupported(eventName, element)\r\n{\r\n\tvar TAGNAMES = {\r\n\t\t'select': 'input', 'change': 'input',\r\n\t\t'submit': 'form', 'reset': 'form',\r\n\t\t'error': 'img', 'load': 'img', 'abort': 'img'\r\n\t};\r\n\t\r\n\telement = element || document.createElement(TAGNAMES[element] || 'div');\r\n\teventName = 'on' + eventName;\r\n\t\r\n\t// When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and \"resize\", whereas `in` \"catches\" those\r\n\tvar isSupported = eventName in element;\r\n\r\n\tif ( !isSupported ) {\r\n\t\t// If it has no `setAttribute` (i.e. doesn't implement Node interface), try generic element\r\n\t\tif ( !element.setAttribute ) {\r\n\t\t\telement = document.createElement('div');\r\n\t\t}\r\n\t\tif ( element.setAttribute && element.removeAttribute ) {\r\n\t\t\telement.setAttribute(eventName, '');\r\n\t\t\tisSupported = typeof element[eventName] == 'function';\r\n\r\n\t\t\t// If property was created, \"remove it\" (by setting value to `undefined`)\r\n\t\t\tif ( typeof element[eventName] != 'undefined' ) {\r\n\t\t\t\telement[eventName] = undefined;\r\n\t\t\t}\r\n\t\t\telement.removeAttribute(eventName);\r\n\t\t}\r\n\t}\r\n\t\r\n\telement = null;\r\n\treturn isSupported;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","\r\n// assumes a JSON return value\r\nexport default function request(verb, url, body, headers)\r\n{\r\n\treturn new Promise((resolve, reject)=>\r\n\t{\r\n\t\tif (!body)\r\n\t\t\tbody = '';\r\n\t\tif (typeof body === 'object')\r\n\t\t\tbody = JSON.stringify(body);\r\n\t\t\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\treq.open(verb, url, true);\r\n\t\treq.setRequestHeader('Content-Type', 'application/json');\r\n\t\treq.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\r\n\t\t\r\n\t\tif (headers)\r\n\t\t\tfor (var key in headers)\r\n\t\t\t\treq.setRequestHeader(key, headers[key]);\r\n\t\t\r\n\t\treq.onerror = function(){\r\n\t\t\treject(new Error('No server response.'));\r\n\t\t}\r\n\t\t\r\n\t\treq.onload = function(){\r\n\t\t\ttry {\r\n\t\t\t\tvar response = JSON.parse(req.responseText);\r\n\t\t\t} catch (e) {\r\n\t\t\t\treject(new Error('Invalid JSON response. Responded:\\n\\n'+req.responseText));\r\n\t\t\t}\r\n\t\t\tif (req.status>=200 && req.status<400 && response) {\r\n\t\t\t\tresolve(response);\r\n\t\t\t} else {\r\n\t\t\t\treject(new Error(response));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treq.send(body);\r\n\t})\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/request.js","/**\r\nCopyright (c) 2014 Taylor Hakes\r\nCopyright (c) 2014 Forbes Lindesay\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\n\r\n(function (root) {\r\n\r\n  // Store setTimeout reference so promise-polyfill will be unaffected by\r\n  // other code modifying setTimeout (like sinon.useFakeTimers())\r\n  var setTimeoutFunc = setTimeout;\r\n\r\n  function noop() {}\r\n  \r\n  // Polyfill for Function.prototype.bind\r\n  function bind(fn, thisArg) {\r\n    return function () {\r\n      fn.apply(thisArg, arguments);\r\n    };\r\n  }\r\n\r\n  function Promise(fn) {\r\n    if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\r\n    if (typeof fn !== 'function') throw new TypeError('not a function');\r\n    this._state = 0;\r\n    this._handled = false;\r\n    this._value = undefined;\r\n    this._deferreds = [];\r\n\r\n    doResolve(fn, this);\r\n  }\r\n\r\n  function handle(self, deferred) {\r\n    while (self._state === 3) {\r\n      self = self._value;\r\n    }\r\n    if (self._state === 0) {\r\n      self._deferreds.push(deferred);\r\n      return;\r\n    }\r\n    self._handled = true;\r\n    Promise._immediateFn(function () {\r\n      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\r\n      if (cb === null) {\r\n        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\r\n        return;\r\n      }\r\n      var ret;\r\n      try {\r\n        ret = cb(self._value);\r\n      } catch (e) {\r\n        reject(deferred.promise, e);\r\n        return;\r\n      }\r\n      resolve(deferred.promise, ret);\r\n    });\r\n  }\r\n\r\n  function resolve(self, newValue) {\r\n    try {\r\n      // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\r\n      if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');\r\n      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\r\n        var then = newValue.then;\r\n        if (newValue instanceof Promise) {\r\n          self._state = 3;\r\n          self._value = newValue;\r\n          finale(self);\r\n          return;\r\n        } else if (typeof then === 'function') {\r\n          doResolve(bind(then, newValue), self);\r\n          return;\r\n        }\r\n      }\r\n      self._state = 1;\r\n      self._value = newValue;\r\n      finale(self);\r\n    } catch (e) {\r\n      reject(self, e);\r\n    }\r\n  }\r\n\r\n  function reject(self, newValue) {\r\n    self._state = 2;\r\n    self._value = newValue;\r\n    finale(self);\r\n  }\r\n\r\n  function finale(self) {\r\n    if (self._state === 2 && self._deferreds.length === 0) {\r\n      Promise._immediateFn(function() {\r\n        if (!self._handled) {\r\n          Promise._unhandledRejectionFn(self._value);\r\n        }\r\n      });\r\n    }\r\n\r\n    for (var i = 0, len = self._deferreds.length; i < len; i++) {\r\n      handle(self, self._deferreds[i]);\r\n    }\r\n    self._deferreds = null;\r\n  }\r\n\r\n  function Handler(onFulfilled, onRejected, promise) {\r\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\r\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\r\n    this.promise = promise;\r\n  }\r\n\r\n  /**\r\n   * Take a potentially misbehaving resolver function and make sure\r\n   * onFulfilled and onRejected are only called once.\r\n   *\r\n   * Makes no guarantees about asynchrony.\r\n   */\r\n  function doResolve(fn, self) {\r\n    var done = false;\r\n    try {\r\n      fn(function (value) {\r\n        if (done) return;\r\n        done = true;\r\n        resolve(self, value);\r\n      }, function (reason) {\r\n        if (done) return;\r\n        done = true;\r\n        reject(self, reason);\r\n      });\r\n    } catch (ex) {\r\n      if (done) return;\r\n      done = true;\r\n      reject(self, ex);\r\n    }\r\n  }\r\n\r\n  Promise.prototype['catch'] = function (onRejected) {\r\n    return this.then(null, onRejected);\r\n  };\r\n\r\n  Promise.prototype.then = function (onFulfilled, onRejected) {\r\n    var prom = new (this.constructor)(noop);\r\n\r\n    handle(this, new Handler(onFulfilled, onRejected, prom));\r\n    return prom;\r\n  };\r\n\r\n  Promise.all = function (arr) {\r\n    var args = Array.prototype.slice.call(arr);\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      if (args.length === 0) return resolve([]);\r\n      var remaining = args.length;\r\n\r\n      function res(i, val) {\r\n        try {\r\n          if (val && (typeof val === 'object' || typeof val === 'function')) {\r\n            var then = val.then;\r\n            if (typeof then === 'function') {\r\n              then.call(val, function (val) {\r\n                res(i, val);\r\n              }, reject);\r\n              return;\r\n            }\r\n          }\r\n          args[i] = val;\r\n          if (--remaining === 0) {\r\n            resolve(args);\r\n          }\r\n        } catch (ex) {\r\n          reject(ex);\r\n        }\r\n      }\r\n\r\n      for (var i = 0; i < args.length; i++) {\r\n        res(i, args[i]);\r\n      }\r\n    });\r\n  };\r\n\r\n  Promise.resolve = function (value) {\r\n    if (value && typeof value === 'object' && value.constructor === Promise) {\r\n      return value;\r\n    }\r\n\r\n    return new Promise(function (resolve) {\r\n      resolve(value);\r\n    });\r\n  };\r\n\r\n  Promise.reject = function (value) {\r\n    return new Promise(function (resolve, reject) {\r\n      reject(value);\r\n    });\r\n  };\r\n\r\n  Promise.race = function (values) {\r\n    return new Promise(function (resolve, reject) {\r\n      for (var i = 0, len = values.length; i < len; i++) {\r\n        values[i].then(resolve, reject);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Use polyfill for setImmediate for performance gains\r\n  Promise._immediateFn = (typeof setImmediate === 'function' && function (fn) { setImmediate(fn); }) ||\r\n    function (fn) {\r\n      setTimeoutFunc(fn, 0);\r\n    };\r\n\r\n  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\r\n    if (typeof console !== 'undefined' && console) {\r\n      console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set the immediate function to execute callbacks\r\n   * @param fn {function} Function to execute\r\n   * @deprecated\r\n   */\r\n  Promise._setImmediateFn = function _setImmediateFn(fn) {\r\n    Promise._immediateFn = fn;\r\n  };\r\n\r\n  /**\r\n   * Change the function to execute on unhandled rejection\r\n   * @param {function} fn Function to execute on unhandled rejection\r\n   * @deprecated\r\n   */\r\n  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\r\n    Promise._unhandledRejectionFn = fn;\r\n  };\r\n  \r\n  if (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = Promise;\r\n  } else if (!root.Promise) {\r\n    root.Promise = Promise;\r\n  }\r\n\r\n})(this);\n\n\n// WEBPACK FOOTER //\n// ./src/Promise.js","var apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\nexports.setImmediate = setImmediate;\nexports.clearImmediate = clearImmediate;\n\n\n\n// WEBPACK FOOTER //\n// ./~/timers-browserify/main.js","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n// WEBPACK FOOTER //\n// ./~/setimmediate/setImmediate.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n// WEBPACK FOOTER //\n// ./~/process/browser.js"],"sourceRoot":""}