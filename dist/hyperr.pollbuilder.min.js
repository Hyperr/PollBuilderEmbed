// v1.0.0
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():"object"==typeof e&&(e.hyperr=e.hyperr||{},e.hyperr.pollBuilder=t())}(this,function(){function e(e){if(c){try{c=JSON.parse(c)}catch(t){}var r=e.currentTarget.querySelector("iframe");r.contentWindow.postMessage(JSON.stringify({event:"drop",data:c}),d.targetOrigin),e.stopPropagation(),e.preventDefault()}}function t(e){if(c){var t=e.currentTarget.querySelector("iframe");return t.contentWindow.postMessage(JSON.stringify({event:"dragover"}),d.targetOrigin),e.preventDefault(),!1}}function r(e){if(c){var t=e.currentTarget.querySelector("iframe");return t.contentWindow.postMessage(JSON.stringify({event:"dragleave"}),d.targetOrigin),e.preventDefault(),!1}}function n(e){if(e&&e.target&&e.target.hasAttribute&&e.target.hasAttribute("data-for-hype")){var t=e.target.getAttribute("data-for-hype");if(t){c=t,e.dataTransfer&&e.dataTransfer.setData&&e.dataTransfer.setData("text",t);for(var r=u.length;r--;)u[r].style.pointerEvents="none",l[r].style.display="block",u[r].contentWindow.postMessage(JSON.stringify({event:"dragstart"}),d.targetOrigin)}}}function i(){if(c){c=!1;for(var e=u.length;e--;)u[e].style.pointerEvents="auto",l[e].style.display="none",u[e].contentWindow.postMessage(JSON.stringify({event:"dragend"}),d.targetOrigin)}}function o(){if(g)return f;var e="draggable"in document.createElement("div"),t=/Mobile|Android|Slick\/|Kindle|BlackBerry|Opera Mini|Opera Mobi/i.test(navigator.userAgent),r=a("dragstart")&&a("drop");return g=!0,f=e&&r&&!t}function a(e,t){t=t||document.createElement(p[e]||"div"),e="on"+e;var r=e in t;return r||(t.setAttribute||(t=document.createElement("div")),t.setAttribute&&t.removeAttribute&&(t.setAttribute(e,""),r="function"==typeof t[e],void 0!==t[e]&&(t[e]=void 0),t.removeAttribute(e))),t=null,r}function s(n,i){if(!o())return void console.warn("This browser/device is not capable of using hyperr poll builder. You can use `pollBuilder.supported` to determine this at runtime.");"string"==typeof n&&(n=window.document.querySelector(n));var a=window.getComputedStyle(n);"static"===a.getPropertyValue("position")&&(console.warn("Embed container must not be set to the CSS `position:static;`. It will be changed to relative."),n.style.position="relative");var s="border:none; outline:none; display:block;",d="display:none; position:absolute; width:100%; height:100%; left:0; top:0;",c='<iframe src="'+i+'" width="100%" height="100%" style="'+s+'"></iframe><div class="iframe-layover" style="'+d+'"></div>';n.innerHTML=c,n.addEventListener("drop",e,!1),n.addEventListener("dragover",t,!1),n.addEventListener("dragleave",r,!1),u.push(n.querySelector("iframe")),l.push(n.querySelector(".iframe-layover"))}var d={targetOrigin:"https://pollbuilder.gethyperr.com",embed:s,get supported(){return o()}},u=[],l=[],c=!1;window.document.addEventListener("dragstart",n,!1),window.document.addEventListener("dragend",i,!1);var g=!1,f=null,p={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d});