/*******************************************************
 * Copyright (C) 2016 PTP APP LLC - All Rights Reserved
 * Unauthorized copying of this file, in whole or in part, via any medium is strictly prohibited.
 * Proprietary and Confidential
 *******************************************************/
"function"!=typeof Object.assign&&(Object.assign=function(e,t){"use strict"
if(null==e)throw new TypeError("Cannot convert undefined or null to object")
for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n]
if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():"object"==typeof e&&(e.pollBuilder=t())}(this,function(){function e(e){if(g){try{g=JSON.parse(g)}catch(e){}var t=e.currentTarget.querySelector("iframe")
t.contentWindow.postMessage({event:"drop",data:g},c.targetOrigin),e.stopPropagation(),e.preventDefault()}}function t(e){if(g){var t=e.currentTarget.querySelector("iframe")
return t.contentWindow.postMessage({event:"dragover"},c.targetOrigin),e.preventDefault(),!1}}function r(e){if(g){var t=e.currentTarget.querySelector("iframe")
return t.contentWindow.postMessage({event:"dragleave"},c.targetOrigin),e.preventDefault(),!1}}function n(e){if(e&&e.target&&e.target.hasAttribute&&e.target.hasAttribute("data-poll-builder")){var t=e.target.getAttribute("data-poll-builder")
if(t){g=t,e.dataTransfer&&e.dataTransfer.setData&&e.dataTransfer.setData("text",t)
for(var r=f.length;r--;)f[r].style.pointerEvents="none",p[r].style.display="block",f[r].contentWindow.postMessage({event:"dragstart"},c.targetOrigin)}}}function i(e){if(g){g=!1
for(var t=f.length;t--;)f[t].style.pointerEvents="auto",p[t].style.display="none",f[t].contentWindow.postMessage({event:"dragend"},c.targetOrigin)}}function o(){var e="draggable"in document.createElement("div"),t=/Mobile|Android|Slick\/|Kindle|BlackBerry|Opera Mini|Opera Mobi/i.test(navigator.userAgent),r=a("dragstart")&&a("drop")
return e&&r&&!t}function a(e,t){var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"}
t=t||document.createElement(r[t]||"div"),e="on"+e
var n=e in t
return n||(t.setAttribute||(t=document.createElement("div")),t.setAttribute&&t.removeAttribute&&(t.setAttribute(e,""),n="function"==typeof t[e],"undefined"!=typeof t[e]&&(t[e]=void 0),t.removeAttribute(e))),t=null,n}function d(e){e=e||0
var t=e
"number"==typeof e&&(t=f[e]),"string"==typeof e&&(t=document.querySelector(e)),t.contentWindow.postMessage({event:"requestdata"},c.targetOrigin)}function s(){function e(){}var t=e.prototype,r={}
return t.on=t.addEventListener=function(e,t){r[e]||(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)},t.has=t.hasEventListener=function(e,t){return r[e]&&r[e].indexOf(t)>-1},t.off=t.removeEventListener=function(e,t){var n=r[e]
if(n){var i=n.indexOf(t)
i>-1&&n.splice(i,1)}},t.trigger=t.dispatchEvent=function(e){var t=r[e.type]
if(t)for(var n=0,i=t.length;n<i;n++)t[n].call(this,e)},t}function l(n,i){if(!o())return void console.warn("This browser/device is not capable of using hyperr poll builder. You can use `pollBuilder.isSupported()` to determine this at runtime.")
"string"==typeof n&&(n=window.document.querySelector(n))
var a=window.getComputedStyle(n)
"static"===a.getPropertyValue("position")&&(console.warn("Embed container must not be set to the CSS `position:static;`. It will be changed to relative."),n.style.position="relative")
var d=f.length,l="pollbuilder-iframe-"+d,u=i+(i.indexOf("?")>-1?"&":"?")+"poll_builder_id="+l+"&poll_builder_index="+d,c="border:none; outline:none; display:block;",g="display:none; position:absolute; width:100%; height:100%; left:0; top:0;",m='<iframe id="'+l+'" src="'+u+'" width="100%" height="100%" style="'+c+'"></iframe><div class="iframe-layover" style="'+g+'"></div>'
n.innerHTML=m,n.addEventListener("drop",e,!1),n.addEventListener("dragover",t,!1),n.addEventListener("dragleave",r,!1)
var b=n.querySelector("iframe")
f.push(b)
var y=Object.create(s())
return v.push(y),p.push(n.querySelector(".iframe-layover")),b.pollBuilderEventDispatcher=y,y.iframe=b,b}var u={targetOrigin:"https://pollbuilder.gethyperr.com",embed:l,isSupported:o,requestData:d,version:"2.0.0"},c=Object.create(s())
Object.assign(c,u)
var f=[],p=[],v=[],g=!1
return window.document.addEventListener("dragstart",n,!1),window.document.addEventListener("dragend",i,!1),window.addEventListener("message",function(e){var t=e.origin===c.targetOrigin,r="*"===c.targetOrigin,n="object"==typeof e.data,i=!!e.data.fromPoll
if(n&&i&&(t||r)&&e.data.isEvent){var o=e.data.event,a=v[o.index]
delete o.index,a.dispatchEvent(o),c.dispatchEvent(o)}}),c})
