!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){if(x){try{x=JSON.parse(x)}catch(e){}var t=e.currentTarget.querySelector("iframe");t.contentWindow.postMessage({event:"drop",data:x},T._targetOrigin),e.stopPropagation(),e.preventDefault()}}function s(e){if(x){var t=e.currentTarget.querySelector("iframe");return t.contentWindow.postMessage({event:"dragover"},T._targetOrigin),e.preventDefault(),!1}}function l(e){if(x){var t=e.currentTarget.querySelector("iframe");return t.contentWindow.postMessage({event:"dragleave"},T._targetOrigin),e.preventDefault(),!1}}function c(e){if(e&&e.target&&e.target.hasAttribute&&e.target.hasAttribute("data-poll-builder")){var t=e.target.getAttribute("data-poll-builder");if(t){x=t,e.dataTransfer&&e.dataTransfer.setData&&e.dataTransfer.setData("text",t);for(var n=k.length;n--;)k[n].style.pointerEvents="none",E[n].style.display="block",k[n].contentWindow.postMessage({event:"dragstart"},T._targetOrigin);T.dispatchEvent({type:"pb:begindrag"});for(var o=S.length;o--;)S[o].dispatchEvent({type:"pb:begindrag"})}}}function f(e){if(x){x=!1;for(var t=k.length;t--;)k[t].style.pointerEvents="auto",E[t].style.display="none",k[t].contentWindow.postMessage({event:"dragend"},T._targetOrigin)}}Object.defineProperty(t,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),m=n(1),y=o(m),v=n(2),h=n(3),b=o(h);n(4);var g="/testing/assets/btn.png",w="/testing/assets/btn-over.png",_=function(e){function t(){var e,n,o,a;r(this,t);for(var u=arguments.length,s=Array(u),l=0;l<u;l++)s[l]=arguments[l];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o.version="1.0.0",o.isSupported=v.isSupported,o._apiURL="https://api.gethyperr.com",o._pollBuilderURL="http://pollbuilder.gethyperr.com",o._targetOrigin="http://pollbuilder.gethyperr.com",a=n,i(o,a)}return a(t,e),p(t,[{key:"requestData",value:function(e){e=e||0;var t=e;"number"==typeof e&&(t=k[e]),"string"==typeof e&&(t=document.querySelector(e)),t.contentWindow.postMessage({event:"requestdata"},T._targetOrigin)}},{key:"embed",value:function(e,t){return T.isSupported()||console.warn("This browser/device is not capable of using hyperr poll builder with drag and drop. You can use `pollBuilder.isSupported()` to determine this at runtime."),new Promise(function(n,o){(0,b.default)("GET",T._apiURL+"/builders/"+t+"/dimensions").then(function(o){"string"==typeof e&&(e=window.document.querySelector(e));var r=window.getComputedStyle(e);"static"===r.getPropertyValue("position")&&(console.warn("Embed container must not be set to the CSS `position:static;`. It will be changed to relative."),e.style.position="relative");var i=k.length,a="pollbuilder-iframe-"+i,c=T._pollBuilderURL+"/"+t+"?pollBuilderID="+a+"&pollBuilderIndex="+i+"&scriptVersion="+T.version,f="border:none; outline:none; display:block;",d="display:none; position:absolute; width:100%; height:100%; left:0; top:0;",p='<iframe id="'+a+'" src="'+c+'" width="100%" height="100%" style="'+f+'"></iframe><div class="iframe-layover" style="'+d+'"></div>';e.innerHTML=p,e.addEventListener("drop",u,!1),e.addEventListener("dragover",s,!1),e.addEventListener("dragleave",l,!1);var m=e.querySelector("iframe");k.push(m);var v=new y.default;S.push(v),E.push(e.querySelector(".iframe-layover")),m.pollBuilderEventDispatcher=v,v.iframe=m,m.style.width=o.width+"px",m.style.height=o.height+"px",n(m)})})}},{key:"embedSticky",value:function(e,t){t=t||{},t.side=(0,v.def)(t.side,"right"),t.fromTop=(0,v.def)(t.fromTop,!1),t.verticalPercent=(0,v.def)(t.verticalPercent,0),t.verticalOffset=(0,v.def)(t.verticalOffset,10),t.position=(0,v.def)(t.position,"fixed"),t.zIndex=(0,v.def)(t.zIndex+"","99"),t.buttonMarkup=(0,v.def)(t.buttonMarkup,null),t.buttonImage=(0,v.def)(t.buttonImage,g),t.buttonImageHover=(0,v.def)(t.buttonImageHover,w),t.buttonCloseImage=(0,v.def)(t.buttonImage,g),t.buttonCloseImageHover=(0,v.def)(t.buttonImageHover,w),t.buttonBottom=(0,v.def)(t.buttonBottom,!1),t.buttonStyles=(0,v.def)(t.buttonStyles,"box-shadow:0 2px 5px rgba(0,0,0,0.25);"),t.builderStyles=(0,v.def)(t.builderStyles,"box-shadow:0 1px 5px rgba(0,0,0,0.25);");var n=k.length,o=document.createElement("div");o.style.position=t.position,o.style[t.side]="0px",o.style.zIndex=t.zIndex,o.style[t.fromTop?"top":"bottom"]="calc("+t.verticalPercent+"% + "+t.verticalOffset+"px)",o.id="pollbuilder-sticky-"+n,document.body.appendChild(o);var r=document.createElement("div");r.style.cssText=t.buttonStyles,r.className="poll-builder-instance",r.style.overflow="hidden",setTimeout(function(){r.style.transition="width 400ms"},0),o.appendChild(r);var i=document.createElement("div");i.style.cssText=t.builderStyles,i.className="poll-builder-button",i.style.position="absolute",i.style[t.side]="100%",i.style.cursor="pointer",i.style[t.buttonBottom?"bottom":"top"]="0",i.addEventListener("click",T.toggleSticky.bind(null,n)),t.buttonMarkup?i.innerHTML=t.buttonMarkup:t.buttonImage&&!t.buttonImageHover?i.innerHTML='<img src="'+t.buttonImage+'" style="display:block;"/>':t.buttonImage&&t.buttonImageHover?i.innerHTML='<img src="'+t.buttonImage+'" style="display:block;"/><img style="display:block;position:absolute;left:0;top:0;opacity:0;transition:opacity 200ms;" onmouseover="this.style.opacity=1;" onmouseout="this.style.opacity=0;" src="'+t.buttonImageHover+'"/>':console.warn("No button image or markup was given for the poll builder!"),o.appendChild(i);var a=T.embed(r,e);return a.then(function(e){S[n].addEventListener("pb:begindrag",function(){T.maximizeSticky(n)}),r.setAttribute("data-width",o.offsetWidth),T.minimizeSticky(n),e.style.float="right"===t.side?"left":"right"}),a}},{key:"minimizeSticky",value:function(e){e=e||0;var t=document.getElementById("pollbuilder-sticky-"+e);if(t){var n=t.getElementsByClassName("poll-builder-instance")[0];n.setAttribute("data-maximized","0"),n.style.width="0px"}}},{key:"maximizeSticky",value:function(e){e=e||0;var t=document.getElementById("pollbuilder-sticky-"+e);if(t){var n=t.getElementsByClassName("poll-builder-instance")[0],o=n.getAttribute("data-width");n.setAttribute("data-maximized","1"),n.style.width=o+"px"}}},{key:"toggleSticky",value:function(e){e=e||0;var t=document.getElementById("pollbuilder-sticky-"+e);if(t){var n=t.getElementsByClassName("poll-builder-instance")[0],o=0!=n.getAttribute("data-maximized");o?T.minimizeSticky(e):T.maximizeSticky(e)}}}]),t}(y.default),T=new _;t.default=T,window.pollBuilder=T;var k=[],E=[],S=T.dispatchers=[],x=!1;window.document.addEventListener("dragstart",c,!1),window.document.addEventListener("dragend",f,!1),window.addEventListener("message",function(e){var t=e.origin===T._targetOrigin,n="*"===T._targetOrigin,o="object"===d(e.data),r=!!e.data.fromPoll;if(o&&r&&(t||n)&&e.data.isEvent){var i=e.data.event,a=S[i.index];delete i.index,a.dispatchEvent(i),T.dispatchEvent(i)}})},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){n(this,e),this.callbacks={}}return o(e,[{key:"addEventListener",value:function(e,t){this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].indexOf(t)===-1&&this.callbacks[e].push(t)}},{key:"hasEventListener",value:function(e,t){return this.callbacks[e]&&this.callbacks[e].indexOf(t)>-1}},{key:"removeEventListener",value:function(e,t){var n=this.callbacks[e];if(n){var o=n.indexOf(t);o>-1&&n.splice(o,1)}}},{key:"dispatchEvent",value:function(e){var t=this.callbacks[e.type];if(t)for(var n=0,o=t.length;n<o;n++)t[n].call(this,e)}}]),e}();t.default=r},function(e,t){"use strict";function n(e,t){return"undefined"==typeof e?t:e}function o(){var e="draggable"in document.createElement("div"),t=/Mobile|Android|Slick\/|Kindle|BlackBerry|Opera Mini|Opera Mobi/i.test(navigator.userAgent),n=r("dragstart")&&r("drop");return e&&n&&!t}function r(e,t){var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};t=t||document.createElement(n[t]||"div"),e="on"+e;var o=e in t;return o||(t.setAttribute||(t=document.createElement("div")),t.setAttribute&&t.removeAttribute&&(t.setAttribute(e,""),o="function"==typeof t[e],"undefined"!=typeof t[e]&&(t[e]=void 0),t.removeAttribute(e))),t=null,o}Object.defineProperty(t,"__esModule",{value:!0}),t.def=n,t.isSupported=o},function(e,t){"use strict";function n(e,t,n,r){return new Promise(function(i,a){n||(n=""),"object"===("undefined"==typeof n?"undefined":o(n))&&(n=JSON.stringify(n));var u=new XMLHttpRequest;if(u.open(e,t,!0),u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),r)for(var s in r)u.setRequestHeader(s,r[s]);u.onerror=function(){a(new Error("No server response."))},u.onload=function(){try{var e=JSON.parse(u.responseText)}catch(e){a(new Error("Invalid JSON response. Responded:\n\n"+u.responseText))}u.status>=200&&u.status<400&&e?i(e):a(new Error(e))},u.send(n)})}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=n},function(e,t,n){(function(t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o){function r(){}function i(e,t){return function(){e.apply(t,arguments)}}function a(e){if("object"!==n(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function u(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void a._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?s:l)(t.promise,e._value);var o;try{o=n(e._value)}catch(e){return void l(t.promise,e)}s(t.promise,o)}))}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===("undefined"==typeof t?"undefined":n(t))||"function"==typeof t)){var o=t.then;if(t instanceof a)return e._state=3,e._value=t,void c(e);if("function"==typeof o)return void d(i(o,t),e)}e._state=1,e._value=t,c(e)}catch(t){l(e,t)}}function l(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)u(e,e._deferreds[t]);e._deferreds=null}function f(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,l(t,e))})}catch(e){if(n)return;n=!0,l(t,e)}}var p=setTimeout;a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(r);return u(this,new f(e,t,n)),n},a.all=function(e){var t=Array.prototype.slice.call(e);return new a(function(e,o){function r(a,u){try{if(u&&("object"===("undefined"==typeof u?"undefined":n(u))||"function"==typeof u)){var s=u.then;if("function"==typeof s)return void s.call(u,function(e){r(a,e)},o)}t[a]=u,0===--i&&e(t)}catch(e){o(e)}}if(0===t.length)return e([]);for(var i=t.length,a=0;a<t.length;a++)r(a,t[a])})},a.resolve=function(e){return e&&"object"===("undefined"==typeof e?"undefined":n(e))&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,n){n(e)})},a.race=function(e){return new a(function(t,n){for(var o=0,r=e.length;o<r;o++)e[o].then(t,n)})},a._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){p(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},a._setImmediateFn=function(e){a._immediateFn=e},a._setUnhandledRejectionFn=function(e){a._unhandledRejectionFn=e},"undefined"!=typeof e&&e.exports?e.exports=a:o.Promise||(o.Promise=a)}(void 0)}).call(t,n(5).setImmediate)},function(e,t,n){"use strict";function o(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new o(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(6),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){"use strict";!function(e,n){function o(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return y[m]=o,p(m),m++}function r(e){delete y[e]}function i(e){var t=e.callback,o=e.args;switch(o.length){case 0:t();break;case 1:t(o[0]);break;case 2:t(o[0],o[1]);break;case 3:t(o[0],o[1],o[2]);break;default:t.apply(n,o)}}function a(e){if(v)setTimeout(a,0,e);else{var t=y[e];if(t){v=!0;try{i(t)}finally{r(e),v=!1}}}}function u(){p=function(e){t.nextTick(function(){a(e)})}}function s(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function l(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),p=function(n){e.postMessage(t+n,"*")}}function c(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;a(t)},p=function(t){e.port2.postMessage(t)}}function f(){var e=h.documentElement;p=function(t){var n=h.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function d(){p=function(e){setTimeout(a,0,e)}}if(!e.setImmediate){var p,m=1,y={},v=!1,h=e.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(e);b=b&&b.setTimeout?b:e,"[object process]"==={}.toString.call(e.process)?u():s()?l():e.MessageChannel?c():h&&"onreadystatechange"in h.createElement("script")?f():d(),b.setImmediate=o,b.clearImmediate=r}}("undefined"==typeof self?"undefined"==typeof e?void 0:e:self)}).call(t,function(){return this}(),n(7))},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){y&&p&&(y=!1,p.length?m=p.concat(m):v=-1,m.length&&u())}function u(){if(!y){var e=r(a);y=!0;for(var t=m.length;t;){for(p=m,m=[];++v<t;)p&&p[v].run();v=-1,t=m.length}p=null,y=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var p,m=[],y=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new s(e,t)),1!==m.length||y||r(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}}]);
//# sourceMappingURL=hyperr.pollbuilder.min.js.map